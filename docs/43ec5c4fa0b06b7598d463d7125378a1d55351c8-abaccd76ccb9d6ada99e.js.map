{"version":3,"sources":["webpack:///../node_modules/d3-array/src/descending.js","webpack:///../node_modules/d3-chord/src/math.js","webpack:///../node_modules/d3-chord/src/chord.js","webpack:///../node_modules/d3-chord/src/array.js","webpack:///../node_modules/d3-chord/src/constant.js","webpack:///../node_modules/d3-chord/src/ribbon.js","webpack:///../src/Chord.tsx","webpack:///../node_modules/d3-shape/src/arc.js"],"names":["b","a","NaN","abs","Math","cos","sin","pi","PI","halfPi","tau","max","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","range","j","_","k","compareValue","compare","source","target","directed","transpose","padAngle","sortGroups","sortSubgroups","sortChords","chord","matrix","dx","groupSums","groupIndex","chords","groups","Float64Array","x","_x","sort","_step","_iterator","_loop","x0","subgroupIndex","filter","_step2","_iterator2","_j","index","startAngle","endAngle","_subgroupIndex","_step3","_iterator3","_j2","_chord3","values","arguments","defaultSource","d","defaultTarget","defaultRadius","radius","defaultStartAngle","defaultEndAngle","defaultPadAngle","headRadius","sourceRadius","targetRadius","context","ribbon","buffer","apply","this","t","ap","argv","sr","sa0","sa1","tr","ta0","ta1","path","moveTo","arc","hr","tr2","ta2","quadraticCurveTo","lineTo","closePath","constant","Chord","width","height","padding","data","colorScheme","schemeSet3","inactive","stroke","fill","outerRadius","min","innerRadius","labels","keys","thisArc","descending","rPath","useState","active","setActive","Base","className","transform","map","m","style","opacity","includes","mixBlendMode","onMouseEnter","onMouseLeave","undefined","y","dy","textAnchor","arcInnerRadius","arcOuterRadius","arcStartAngle","arcEndAngle","arcPadAngle","intersect","y0","x1","y1","x2","y2","x3","y3","x10","y10","x32","y32","cornerTangents","r1","rc","cw","x01","y01","lo","ox","oy","x11","y11","x00","y00","d2","r","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cx","cy","cornerRadius","padRadius","r0","a0","a1","da","t0","t1","a01","a11","a00","a10","da0","da1","rp","rc0","rc1","p0","p1","oc","ax","ay","bx","by","kc","lc","centroid"],"mappings":"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","file":"43ec5c4fa0b06b7598d463d7125378a1d55351c8-abaccd76ccb9d6ada99e.js","sourcesContent":["export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}","export var abs = Math.abs;\nexport var cos = Math.cos;\nexport var sin = Math.sin;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = pi * 2;\nexport var max = Math.max;\nexport var epsilon = 1e-12;","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { max, tau } from \"./math.js\";\n\nfunction range(i, j) {\n  return Array.from({\n    length: j - i\n  }, function (_, k) {\n    return i + k;\n  });\n}\n\nfunction compareValue(compare) {\n  return function (a, b) {\n    return compare(a.source.value + a.target.value, b.source.value + b.target.value);\n  };\n}\n\nexport default function () {\n  return chord(false, false);\n}\nexport function chordTranspose() {\n  return chord(false, true);\n}\nexport function chordDirected() {\n  return chord(true, false);\n}\n\nfunction chord(directed, transpose) {\n  var padAngle = 0,\n      sortGroups = null,\n      sortSubgroups = null,\n      sortChords = null;\n\n  function chord(matrix) {\n    var n = matrix.length,\n        groupSums = new Array(n),\n        groupIndex = range(0, n),\n        chords = new Array(n * n),\n        groups = new Array(n),\n        k = 0,\n        dx;\n    matrix = Float64Array.from({\n      length: n * n\n    }, transpose ? function (_, i) {\n      return matrix[i % n][i / n | 0];\n    } : function (_, i) {\n      return matrix[i / n | 0][i % n];\n    }); // Compute the scaling factor from value to angle in [0, 2pi].\n\n    for (var i = 0; i < n; ++i) {\n      var x = 0;\n\n      for (var j = 0; j < n; ++j) {\n        x += matrix[i * n + j] + directed * matrix[j * n + i];\n      }\n\n      k += groupSums[i] = x;\n    }\n\n    k = max(0, tau - padAngle * n) / k;\n    dx = k ? padAngle : tau / n; // Compute the angles for each group and constituent chord.\n\n    {\n      var _x = 0;\n      if (sortGroups) groupIndex.sort(function (a, b) {\n        return sortGroups(groupSums[a], groupSums[b]);\n      });\n\n      var _iterator = _createForOfIteratorHelper(groupIndex),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var i = _step.value;\n          var x0 = _x;\n\n          if (directed) {\n            var subgroupIndex = range(~n + 1, n).filter(function (j) {\n              return j < 0 ? matrix[~j * n + i] : matrix[i * n + j];\n            });\n            if (sortSubgroups) subgroupIndex.sort(function (a, b) {\n              return sortSubgroups(a < 0 ? -matrix[~a * n + i] : matrix[i * n + a], b < 0 ? -matrix[~b * n + i] : matrix[i * n + b]);\n            });\n\n            var _iterator2 = _createForOfIteratorHelper(subgroupIndex),\n                _step2;\n\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var _j = _step2.value;\n\n                if (_j < 0) {\n                  var _chord = chords[~_j * n + i] || (chords[~_j * n + i] = {\n                    source: null,\n                    target: null\n                  });\n\n                  _chord.target = {\n                    index: i,\n                    startAngle: _x,\n                    endAngle: _x += matrix[~_j * n + i] * k,\n                    value: matrix[~_j * n + i]\n                  };\n                } else {\n                  var _chord2 = chords[i * n + _j] || (chords[i * n + _j] = {\n                    source: null,\n                    target: null\n                  });\n\n                  _chord2.source = {\n                    index: i,\n                    startAngle: _x,\n                    endAngle: _x += matrix[i * n + _j] * k,\n                    value: matrix[i * n + _j]\n                  };\n                }\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n\n            groups[i] = {\n              index: i,\n              startAngle: x0,\n              endAngle: _x,\n              value: groupSums[i]\n            };\n          } else {\n            var _subgroupIndex = range(0, n).filter(function (j) {\n              return matrix[i * n + j] || matrix[j * n + i];\n            });\n\n            if (sortSubgroups) _subgroupIndex.sort(function (a, b) {\n              return sortSubgroups(matrix[i * n + a], matrix[i * n + b]);\n            });\n\n            var _iterator3 = _createForOfIteratorHelper(_subgroupIndex),\n                _step3;\n\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var _j2 = _step3.value;\n\n                var _chord3 = void 0;\n\n                if (i < _j2) {\n                  _chord3 = chords[i * n + _j2] || (chords[i * n + _j2] = {\n                    source: null,\n                    target: null\n                  });\n                  _chord3.source = {\n                    index: i,\n                    startAngle: _x,\n                    endAngle: _x += matrix[i * n + _j2] * k,\n                    value: matrix[i * n + _j2]\n                  };\n                } else {\n                  _chord3 = chords[_j2 * n + i] || (chords[_j2 * n + i] = {\n                    source: null,\n                    target: null\n                  });\n                  _chord3.target = {\n                    index: i,\n                    startAngle: _x,\n                    endAngle: _x += matrix[i * n + _j2] * k,\n                    value: matrix[i * n + _j2]\n                  };\n                  if (i === _j2) _chord3.source = _chord3.target;\n                }\n\n                if (_chord3.source && _chord3.target && _chord3.source.value < _chord3.target.value) {\n                  var source = _chord3.source;\n                  _chord3.source = _chord3.target;\n                  _chord3.target = source;\n                }\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n\n            groups[i] = {\n              index: i,\n              startAngle: x0,\n              endAngle: _x,\n              value: groupSums[i]\n            };\n          }\n\n          _x += dx;\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    } // Remove empty chords.\n\n    chords = Object.values(chords);\n    chords.groups = groups;\n    return sortChords ? chords.sort(sortChords) : chords;\n  }\n\n  chord.padAngle = function (_) {\n    return arguments.length ? (padAngle = max(0, _), chord) : padAngle;\n  };\n\n  chord.sortGroups = function (_) {\n    return arguments.length ? (sortGroups = _, chord) : sortGroups;\n  };\n\n  chord.sortSubgroups = function (_) {\n    return arguments.length ? (sortSubgroups = _, chord) : sortSubgroups;\n  };\n\n  chord.sortChords = function (_) {\n    return arguments.length ? (_ == null ? sortChords = null : (sortChords = compareValue(_))._ = _, chord) : sortChords && sortChords._;\n  };\n\n  return chord;\n}","export var slice = Array.prototype.slice;","export default function (x) {\n  return function () {\n    return x;\n  };\n}","import { path } from \"d3-path\";\nimport { slice } from \"./array.js\";\nimport constant from \"./constant.js\";\nimport { abs, cos, epsilon, halfPi, sin } from \"./math.js\";\n\nfunction defaultSource(d) {\n  return d.source;\n}\n\nfunction defaultTarget(d) {\n  return d.target;\n}\n\nfunction defaultRadius(d) {\n  return d.radius;\n}\n\nfunction defaultStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction defaultEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction defaultPadAngle() {\n  return 0;\n}\n\nfunction defaultArrowheadRadius() {\n  return 10;\n}\n\nfunction ribbon(headRadius) {\n  var source = defaultSource,\n      target = defaultTarget,\n      sourceRadius = defaultRadius,\n      targetRadius = defaultRadius,\n      startAngle = defaultStartAngle,\n      endAngle = defaultEndAngle,\n      padAngle = defaultPadAngle,\n      context = null;\n\n  function ribbon() {\n    var buffer,\n        s = source.apply(this, arguments),\n        t = target.apply(this, arguments),\n        ap = padAngle.apply(this, arguments) / 2,\n        argv = slice.call(arguments),\n        sr = +sourceRadius.apply(this, (argv[0] = s, argv)),\n        sa0 = startAngle.apply(this, argv) - halfPi,\n        sa1 = endAngle.apply(this, argv) - halfPi,\n        tr = +targetRadius.apply(this, (argv[0] = t, argv)),\n        ta0 = startAngle.apply(this, argv) - halfPi,\n        ta1 = endAngle.apply(this, argv) - halfPi;\n    if (!context) context = buffer = path();\n\n    if (ap > epsilon) {\n      if (abs(sa1 - sa0) > ap * 2 + epsilon) sa1 > sa0 ? (sa0 += ap, sa1 -= ap) : (sa0 -= ap, sa1 += ap);else sa0 = sa1 = (sa0 + sa1) / 2;\n      if (abs(ta1 - ta0) > ap * 2 + epsilon) ta1 > ta0 ? (ta0 += ap, ta1 -= ap) : (ta0 -= ap, ta1 += ap);else ta0 = ta1 = (ta0 + ta1) / 2;\n    }\n\n    context.moveTo(sr * cos(sa0), sr * sin(sa0));\n    context.arc(0, 0, sr, sa0, sa1);\n\n    if (sa0 !== ta0 || sa1 !== ta1) {\n      if (headRadius) {\n        var hr = +headRadius.apply(this, arguments),\n            tr2 = tr - hr,\n            ta2 = (ta0 + ta1) / 2;\n        context.quadraticCurveTo(0, 0, tr2 * cos(ta0), tr2 * sin(ta0));\n        context.lineTo(tr * cos(ta2), tr * sin(ta2));\n        context.lineTo(tr2 * cos(ta1), tr2 * sin(ta1));\n      } else {\n        context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\n        context.arc(0, 0, tr, ta0, ta1);\n      }\n    }\n\n    context.quadraticCurveTo(0, 0, sr * cos(sa0), sr * sin(sa0));\n    context.closePath();\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  if (headRadius) ribbon.headRadius = function (_) {\n    return arguments.length ? (headRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : headRadius;\n  };\n\n  ribbon.radius = function (_) {\n    return arguments.length ? (sourceRadius = targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.sourceRadius = function (_) {\n    return arguments.length ? (sourceRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.targetRadius = function (_) {\n    return arguments.length ? (targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : targetRadius;\n  };\n\n  ribbon.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\n  };\n\n  ribbon.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\n  };\n\n  ribbon.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : padAngle;\n  };\n\n  ribbon.source = function (_) {\n    return arguments.length ? (source = _, ribbon) : source;\n  };\n\n  ribbon.target = function (_) {\n    return arguments.length ? (target = _, ribbon) : target;\n  };\n\n  ribbon.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, ribbon) : context;\n  };\n\n  return ribbon;\n}\n\nexport default function () {\n  return ribbon();\n}\nexport function ribbonArrow() {\n  return ribbon(defaultArrowheadRadius);\n}","import { descending } from 'd3-array';\nimport {\n  chord,\n  ribbon,\n} from 'd3-chord';\nimport { schemeSet3 } from 'd3-scale-chromatic';\nimport { arc } from 'd3-shape';\nimport React, {\n  FC,\n  useState,\n} from 'react';\n\nimport Base from './components/Base';\n\nexport interface IProps {\n  width: number;\n  height: number;\n  padding?: number;\n  data: Record<string, number[]>;\n  colorScheme?: string[];\n  inactive?: {\n    stroke: string;\n    fill: string;\n  }\n}\n\nconst Chord: FC<IProps> = ({\n  width,\n  height,\n  padding = 10,\n  data,\n  colorScheme = schemeSet3,\n  inactive = {\n    stroke: '#ddd',\n    fill: '#eee',\n  },\n}) => {\n\n  const outerRadius = Math.min(width - padding, height - padding) * 0.5\n  const innerRadius = outerRadius - 10;\n\n  const labels = Object.keys(data);\n  const matrix = Object.values(data);\n\n  const thisArc = arc<any, any>()\n    .innerRadius(innerRadius)\n    .outerRadius(outerRadius)\n\n  const chords = chord()\n    .sortSubgroups(descending)\n    .sortChords(descending)\n    .padAngle(10 / innerRadius)(matrix);\n\n  const rPath = ribbon().radius((width - padding) / 2 - 10);\n\n  const [active, setActive] = useState<number>();\n  return (\n    <Base width={width} height={height}>\n      <g className=\"ribbons\"\n        transform={`translate(${(width) / 2},${height / 2})`}>\n        {\n          chords\n            .map((m, i) => <g><path\n              stroke={inactive.stroke}\n\n              style={{\n                opacity: [m.source.index, m.target.index].includes(active as number) ? 1 : 0.5,\n                mixBlendMode: \"multiply\",\n              }}\n              fill={active === m.source.index ? colorScheme[m.source.index] :\n                active === m.target.index ? colorScheme[m.target.index]\n                  : inactive.fill}\n              d={`${rPath({\n                source: {\n                  ...m.source,\n                  radius: 100,\n                }, target: {\n                  ...m.target,\n                  radius: 100,\n                }\n              })}`}\n              onMouseEnter={() => setActive(m.source.index)}\n              onMouseLeave={() => setActive(undefined)}\n            >\n              <title>[{m.source.value}] {labels[m.source.index]} → [{m.target.value}] {labels[m.target.index]}</title>\n            </path>\n\n\n\n            </g>)\n        }\n      </g>\n      <g className=\"arcs\"\n        transform={`translate(${(width) / 2},${height / 2})`}>\n        {\n          chords.groups.map((arc, i: number) => {\n            return <><path\n              stroke={colorScheme[i]}\n              fill={colorScheme[i]}\n              onMouseEnter={() => setActive(i)}\n              onMouseLeave={() => setActive(undefined)}\n              d={thisArc(arc) ?? ''}\n\n            ></path>\n              <g transform={`rotate(${(arc.endAngle - ((arc.endAngle - arc.startAngle) / 2)) * 180 / Math.PI - 90}) translate(${outerRadius},0)`}>\n                <text x={0}\n                  y={-10}\n                  dy=\"0.55rem\"\n                  transform=\"rotate(90)\"\n                  textAnchor=\"middle\"\n                >{labels[arc.index]}</text>\n              </g>\n            </>;\n          }\n          )\n        }\n      </g>\n    </Base>\n  )\n}\n\nexport default Chord;\n","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport { abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau } from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0,\n      y10 = y1 - y0,\n      x32 = x3 - x2,\n      y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n} // Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\n\n\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00; // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function () {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n    if (!context) context = buffer = path(); // Ensure that the outer radius is always larger than the inner radius.\n\n    if (r1 < r0) r = r1, r1 = r0, r0 = r; // Is it a point?\n\n    if (!(r1 > epsilon)) context.moveTo(0, 0); // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n        context.moveTo(r1 * cos(a0), r1 * sin(a0));\n        context.arc(0, 0, r1, a0, a1, !cw);\n\n        if (r0 > epsilon) {\n          context.moveTo(r0 * cos(a1), r0 * sin(a1));\n          context.arc(0, 0, r0, a1, a0, cw);\n        }\n      } // Or is it a circular or annular sector?\n      else {\n          var a01 = a0,\n              a11 = a1,\n              a00 = a0,\n              a10 = a1,\n              da0 = da,\n              da1 = da,\n              ap = padAngle.apply(this, arguments) / 2,\n              rp = ap > epsilon && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n              rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n              rc0 = rc,\n              rc1 = rc,\n              t0,\n              t1; // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n\n          if (rp > epsilon) {\n            var p0 = asin(rp / r0 * sin(ap)),\n                p1 = asin(rp / r1 * sin(ap));\n            if ((da0 -= p0 * 2) > epsilon) p0 *= cw ? 1 : -1, a00 += p0, a10 -= p0;else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n            if ((da1 -= p1 * 2) > epsilon) p1 *= cw ? 1 : -1, a01 += p1, a11 -= p1;else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n          }\n\n          var x01 = r1 * cos(a01),\n              y01 = r1 * sin(a01),\n              x10 = r0 * cos(a10),\n              y10 = r0 * sin(a10); // Apply rounded corners?\n\n          if (rc > epsilon) {\n            var x11 = r1 * cos(a11),\n                y11 = r1 * sin(a11),\n                x00 = r0 * cos(a00),\n                y00 = r0 * sin(a00),\n                oc; // Restrict the corner radius according to the sector angle.\n\n            if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n              var ax = x01 - oc[0],\n                  ay = y01 - oc[1],\n                  bx = x11 - oc[0],\n                  by = y11 - oc[1],\n                  kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                  lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n              rc0 = min(rc, (r0 - lc) / (kc - 1));\n              rc1 = min(rc, (r1 - lc) / (kc + 1));\n            }\n          } // Is the sector collapsed to a line?\n\n\n          if (!(da1 > epsilon)) context.moveTo(x01, y01); // Does the sector’s outer ring have rounded corners?\n          else if (rc1 > epsilon) {\n              t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n              t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n              context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01); // Have the corners merged?\n\n              if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw); // Otherwise, draw the two corners and the ring.\n              else {\n                  context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n                  context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n                  context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n                }\n            } // Or is the outer ring just a circular arc?\n            else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw); // Is there no inner ring, and it’s a circular sector?\n          // Or perhaps it’s an annular sector collapsed due to padding?\n\n          if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10); // Does the sector’s inner ring (or point) have rounded corners?\n          else if (rc0 > epsilon) {\n              t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n              t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n              context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01); // Have the corners merged?\n\n              if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw); // Otherwise, draw the two corners and the ring.\n              else {\n                  context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n                  context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n                  context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n                }\n            } // Or is the inner ring just a circular arc?\n            else context.arc(0, 0, r0, a10, a00, cw);\n        }\n    context.closePath();\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function () {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function (_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function (_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function (_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function (_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, arc) : context;\n  };\n\n  return arc;\n}"],"sourceRoot":""}