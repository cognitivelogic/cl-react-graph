{"version":3,"sources":["webpack:///../node_modules/lodash/_copySymbols.js","webpack:///../node_modules/lodash/_baseClone.js","webpack:///../node_modules/lodash/_arrayFilter.js","webpack:///../node_modules/lodash/_getAllKeys.js","webpack:///../node_modules/lodash/_initCloneArray.js","webpack:///../node_modules/lodash/_cloneDataView.js","webpack:///../node_modules/lodash/_baseGetAllKeys.js","webpack:///../src/utils/mouseOver.ts","webpack:///../node_modules/lodash/_cloneRegExp.js","webpack:///../node_modules/lodash/_baseAssignIn.js","webpack:///../node_modules/lodash/_getSymbolsIn.js","webpack:///../node_modules/lodash/isMap.js","webpack:///../node_modules/lodash/_copySymbolsIn.js","webpack:///../node_modules/lodash/_baseIsMap.js","webpack:///../node_modules/lodash/isSet.js","webpack:///../node_modules/lodash/stubArray.js","webpack:///../src/JoyPlot.tsx","webpack:///../src/utils/useJoyPlot.ts","webpack:///../node_modules/lodash/_cloneSymbol.js","webpack:///../node_modules/lodash/mergeWith.js","webpack:///../node_modules/lodash/_baseKeys.js","webpack:///../node_modules/lodash/_nativeKeys.js","webpack:///../src/Tornado.tsx","webpack:///../src/tip.ts","webpack:///../src/UpsetChart.tsx","webpack:///../node_modules/lodash/_DataView.js","webpack:///../node_modules/lodash/_arrayEach.js","webpack:///../node_modules/d3-timer/src/timer.js","webpack:///../node_modules/d3-timer/src/timeout.js","webpack:///../node_modules/d3-transition/src/transition/schedule.js","webpack:///../node_modules/d3-transition/src/interrupt.js","webpack:///../node_modules/d3-transition/src/transition/tween.js","webpack:///../node_modules/d3-transition/src/transition/interpolate.js","webpack:///../node_modules/d3-transition/src/transition/attr.js","webpack:///../node_modules/d3-transition/src/transition/attrTween.js","webpack:///../node_modules/d3-transition/src/transition/delay.js","webpack:///../node_modules/d3-transition/src/transition/duration.js","webpack:///../node_modules/d3-transition/src/transition/ease.js","webpack:///../node_modules/d3-transition/src/transition/on.js","webpack:///../node_modules/d3-transition/src/transition/remove.js","webpack:///../node_modules/d3-transition/src/transition/selection.js","webpack:///../node_modules/d3-transition/src/transition/style.js","webpack:///../node_modules/d3-transition/src/transition/styleTween.js","webpack:///../node_modules/d3-transition/src/transition/textTween.js","webpack:///../node_modules/d3-transition/src/transition/index.js","webpack:///../node_modules/d3-transition/src/transition/select.js","webpack:///../node_modules/d3-transition/src/transition/selectAll.js","webpack:///../node_modules/d3-transition/src/transition/filter.js","webpack:///../node_modules/d3-transition/src/transition/merge.js","webpack:///../node_modules/d3-transition/src/transition/transition.js","webpack:///../node_modules/d3-transition/src/transition/text.js","webpack:///../node_modules/d3-transition/src/transition/end.js","webpack:///../node_modules/d3-transition/src/selection/transition.js","webpack:///../node_modules/d3-ease/src/cubic.js","webpack:///../node_modules/d3-transition/src/selection/index.js","webpack:///../node_modules/d3-transition/src/selection/interrupt.js","webpack:///../node_modules/d3-transition/src/active.js","webpack:///../node_modules/d3-shape/src/descending.js","webpack:///../node_modules/d3-shape/src/identity.js","webpack:///../src/legacy/PieChartD3.ts","webpack:///../node_modules/d3-shape/src/pie.js","webpack:///../src/legacy/PieChart.tsx","webpack:///../node_modules/lodash/_Set.js","webpack:///../node_modules/d3-axis/src/array.js","webpack:///../node_modules/d3-axis/src/identity.js","webpack:///../node_modules/d3-axis/src/axis.js","webpack:///../src/legacy/ScatterPlot.tsx","webpack:///../src/legacy/ScatterPlotD3.ts","webpack:///../src/d3/attrs.ts","webpack:///../src/grid.ts","webpack:///../src/utils/svg.ts","webpack:///../src/legacy/TornadoD3.ts","webpack:///../src/legacy/Tornado.tsx","webpack:///../node_modules/lodash/_WeakMap.js","webpack:///../node_modules/lodash/_arrayPush.js","webpack:///../node_modules/lodash/keys.js","webpack:///../node_modules/lodash/_initCloneByTag.js","webpack:///../src/colors/index.js","webpack:///../node_modules/lodash/_Promise.js","webpack:///../node_modules/lodash/_getTag.js","webpack:///../src/Legend.tsx","webpack:///../node_modules/lodash/_getSymbols.js","webpack:///../node_modules/lodash/_baseAssign.js","webpack:///../node_modules/lodash/cloneDeep.js","webpack:///../node_modules/lodash/_getAllKeysIn.js","webpack:///../node_modules/lodash/_baseIsSet.js"],"names":["copyObject","getSymbols","module","exports","source","object","Stack","arrayEach","assignValue","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","getTag","initCloneArray","initCloneByTag","initCloneObject","isArray","isBuffer","isMap","isObject","isSet","keys","keysIn","cloneableTags","baseClone","value","bitmask","customizer","key","stack","result","isDeep","isFlat","isFull","undefined","isArr","tag","isFunc","stacked","get","set","forEach","subValue","add","props","array","predicate","index","length","resIndex","baseGetAllKeys","hasOwnProperty","Object","prototype","constructor","call","input","cloneArrayBuffer","dataView","buffer","byteOffset","byteLength","arrayPush","keysFunc","symbolsFunc","onMouseOver","d","i","nodes","bins","hover","tipContentFn","tipContent","tip","tipContainer","ix","findIndex","b","label","select","attr","transition","html","fx","in","onMouseOut","colors","out","onClick","reFlags","regexp","exec","lastIndex","getPrototype","stubArray","getSymbolsIn","getOwnPropertySymbols","baseIsMap","baseUnary","nodeUtil","nodeIsMap","isObjectLike","baseIsSet","nodeIsSet","JoyPlot","axisLabelFormat","colorScheme","data","direction","EChartDirection","VERTICAL","height","width","xAxisHeight","padding","defaultPadding","yAxisWidth","titleHeight","titleLayout","ELabelOrientation","HORIZONTAL","clampToZero","chartHeight","useState","setBins","domain","setDomain","values","setValues","useEffect","allBins","reduce","p","n","Array","from","Set","allValues","map","counts","count","fill","c","countIndex","allBinIndex","eachValue","prev","next","push","e","extent","useJoyPlot","plotHeight","Base","top","xWidth","Number","title","transform","defaultTickFormat","stroke","fontSize","fontWeight","String","YAxis","scale","labelFormat","path","opacity","labelOrientation","tickFormat","XAxis","left","Bars","groupLayout","EGroupedBarLayout","STACKED","Symbol","symbolProto","symbolValueOf","valueOf","symbol","baseMerge","mergeWith","createAssigner","srcIndex","isPrototype","nativeKeys","overArg","Tornado","schemeSet3","id","GROUPED","splitBins","visible","splitAxisHeight","chartPadding","showBinPercentages","calculateDomain","baseProps","dataSets","genderIndex","aValue","rowIndex","side","groupLabel","colorRef","reverse","right","barWidth","barHeight","inverse","showLabels","tickSize","center","leftValues","concat","rightValues","applyDomainAffordance","Math","max","container","style","event","pageX","pageY","duration","move","makeTip","selector","remove","append","ActiveCircles","radius","active","inactive","setBandScale","union","yPoints","bin","bandwidth","labels","join","bandScale","scaleBand","rangeRound","paddingInner","paddingOuter","align","x","includes","bounds","x1","y1","x2","y2","cy","cx","r","DistributionBars","LabelComponent","axisSpace","useMemo","useHistogramDomain","SetSizeBars","axisWidth","textFill","empty","className","textAnchor","y","iterables","iterable","item","UpsetChart","setSize","dimensions","chartWidth","distribution","description","h","border","DataView","getNative","iteratee","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","bind","f","setTimeout","clearNow","Timer","this","_call","_time","_next","timer","callback","delay","time","t","restart","wake","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","TypeError","stop","elapsed","emptyOn","emptyTween","schedules","node","__transition","self","tween","start","j","o","state","name","on","__data__","group","tick","ease","timing","init","schedule","Error","tweenRemove","tween0","tween1","slice","splice","tweenFunction","tweenValue","_id","each","apply","arguments","color","a","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","space","local","attrConstant","interpolate","value1","string00","interpolate0","string1","string0","getAttribute","attrConstantNS","getAttributeNS","attrFunction","string10","attrFunctionNS","attrInterpolate","setAttribute","attrInterpolateNS","setAttributeNS","attrTweenNS","i0","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","listener","on0","on1","sit","trim","split","every","indexOf","copy","Selection","selection","styleRemove","removeProperty","styleInterpolate","priority","setProperty","styleTween","textInterpolate","textContent","textTween","Transition","groups","parents","_groups","_parents","_name","newId","selection_prototype","m","subgroups","subnode","subgroup","selectAll","selectorAll","child","children","inherit","k","l","filter","match","matcher","merge","groups0","groups1","m0","m1","min","merges","group0","group1","id0","id1","size","namespace","styleNull","styleFunction","listener0","styleMaybeRemove","styleConstant","text","textFunction","textConstant","parent","parentNode","removeChild","end","that","Promise","resolve","reject","cancel","_","interrupt","defaultTiming","NaN","thisPie","identity","sortValues","descending","sort","startAngle","constant","endAngle","padAngle","pie","a1","v","sum","arcs","a0","da","abs","pa","outerRadius","setIndex","donutWidth","innerRadius","getArc","arc","arcTween","thisArc","_current","PieChart","ref","chart","containers","svg","previousData","storedWidth","storedHeight","backgroundColor","lighten","display","displayFn","margin","bottom","tips","create","el","newProps","_makeSvg","dataSet","drawChartBg","update","childNodes","getElementsByTagName","cloneDeep","drawCharts","theme","drawChart","drawLabels","tau","PI","bgArc","background","enter","scaleOrdinal","s","toString","exit","path2","centroid","destroy","pieChartD3","parentWidth","handleResize","getDOMNode","offsetWidth","setState","getChartState","componentDidMount","addEventListener","componentDidUpdate","rest","componentWillUnmount","removeEventListener","ReactDOM","findDOMNode","Text","render","Component","translateX","translateY","number","offset","round","entering","__axis","orient","tickArguments","tickValues","tickSizeInner","tickSizeOuter","tickPadding","axis","context","ticks","format","spacing","range","range0","range1","position","order","tickExit","tickEnter","line","insert","isFinite","axisBottom","axisLeft","ScatterPlot","xAxis","yAxis","yScale","scaleLinear","xScale","domainByTrait","choices","distModels","legendWidth","_drawScales","xSize","ySize","_drawLegend","legend","cell","_drawPoints","traits","nx","cross","plotCell","trait","scatterPlotD3","componentWillReceiveProps","defaultProps","gridWidth","sizeSVG","TornadoD3","innerScaleBand","defaultAxis","bar","grouped","overlayMargin","grid","defaultGrid","dasharray","linecap","mergeProps","svgId","makeSvg","gridX","gridY","xAxisContainer2","makeScales","xAxisContainer","yAxisContainer","xAxisLabel","yAxisLabel","drawAxes","valuesCount","w","gridHeight","dataLabels","groupedPaddingInner","groupedBarsUseSameXAxisValue","replace","shouldFormatTick","timeFormat","dateFormat","isNaN","numberFormat","axisLength","axisConfig","limitByValues","scalePoint","xGroupAxis","nice","xAxisY","attrs","updateChart","groupData","percentData","totals","datum","total","percent","calculatePercents","gWidth","g","bars","yd","OVERLAID","floor","getBarWidth","stackIndex","percents","yText","xText","objValue","srcValue","WeakMap","arrayLikeKeys","baseKeys","isArrayLike","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","Ctor","Map","baseGetTag","toSource","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","ctorString","legendIconStyle","cursor","listStyle","liStyle","alignItems","Legend","onSelect","scheme","arrayFilter","propertyIsEnumerable","nativeGetSymbols","CLONE_DEEP_FLAG"],"mappings":"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","file":"7a016cf43b93993ddef5c9256c2e99a4fc0a4552-e624374b3aa9c8b48274.js","sourcesContent":["var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","import { ScaleOrdinal } from 'd3-scale';\nimport { select } from 'd3-selection';\n\nimport {\n  EColorManipulations,\n  IGroupDataItem,\n} from '../Histogram';\nimport { TipContentFn } from '../legacy/types';\n\ninterface IProps {\n  bins: string[],\n  hover?: Partial<Record<EColorManipulations, number>>,\n  colors: ScaleOrdinal<string, string>,\n  tipContentFn: TipContentFn<string> | undefined,\n  tipContent: any,\n  tip: any,\n  tipContainer: string,\n  colourIndex?: string,\n};\n\ninterface IMouseOutTipProps {\n  tip: any,\n  tipContainer: any,\n}\n\ninterface IMouseOutProps extends IMouseOutTipProps {\n  colors: ScaleOrdinal<string, string>,\n}\n\n\nexport const onMouseOver = (props: IProps) => (d: IGroupDataItem | any, i: number, nodes: any) => {\n  const {\n    bins,\n    hover,\n    tipContentFn,\n    tipContent,\n    tip,\n    tipContainer,\n  } = props;\n  const ix = bins.findIndex((b) => b === d.label);\n  if (!tipContentFn) {\n    return;\n  }\n  if (hover) {\n    select(nodes[i])\n      .attr('fill-opacity', 1)\n      .transition('easeIn')\n      .attr('fill-opacity', 0.7);\n  }\n  tipContent.html(() => tipContentFn(bins, ix, d.value || d));\n  tip.fx.in(tipContainer);\n};\n\nexport const onMouseOut = (props: IMouseOutProps) => (d: IGroupDataItem | number, i: number, nodes: any) => {\n  const { tip, tipContainer, colors } = props;\n  tip.fx.out(tipContainer);\n  select(nodes[i])\n    .attr('fill-opacity', 0.7)\n    .transition('easeIn')\n    .attr('fill-opacity', 1);\n}\nexport const onClick = (onClick?: (v: any) => void) => (d: IGroupDataItem | number) => {\n  if (onClick) {\n    onClick(d);\n  }\n}\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","import React, { FC } from 'react';\n\nimport { EChartDirection } from './BarChart';\nimport Bars, { defaultPadding } from './components/Bars/Bars';\nimport Base from './components/Base';\nimport { TTipFunc } from './components/ToolTip';\nimport XAxis from './components/XAxis';\nimport YAxis, {\n  defaultTickFormat,\n  ELabelOrientation,\n  TAxisLabelFormat,\n} from './components/YAxis';\nimport {\n  EGroupedBarLayout,\n  IBarChartData,\n  IHistogramBar,\n} from './Histogram';\nimport { useJoyPlot } from './utils/useJoyPlot';\n\nexport interface IProps {\n  axisLabelFormat?: TAxisLabelFormat;\n  colorScheme?: string[];\n  data: IBarChartData[];\n  direction?: EChartDirection;\n  height: number;\n  padding?: IHistogramBar;\n  tip?: TTipFunc;\n  width: number;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n  titleHeight?: number;\n  titleLayout?: ELabelOrientation;\n}\n\n/**\n * JoyPlot component\n */\nconst JoyPlot: FC<IProps> = ({\n  axisLabelFormat,\n  colorScheme,\n  data,\n  direction = EChartDirection.VERTICAL,\n  height,\n  tip,\n  width,\n  xAxisHeight,\n  padding = defaultPadding,\n  yAxisWidth,\n  titleHeight = 40,\n  titleLayout = ELabelOrientation.HORIZONTAL,\n}) => {\n  const {\n    chartHeight,\n    bins,\n    domain,\n    values\n  } = useJoyPlot({\n    data,\n    height,\n  })\n  if (!yAxisWidth) {\n    yAxisWidth = direction === EChartDirection.VERTICAL ? 40 : 100;\n  }\n  if (!xAxisHeight) {\n    xAxisHeight = direction === EChartDirection.VERTICAL ? 100 : 40;\n  }\n\n  const plotHeight = titleLayout === ELabelOrientation.HORIZONTAL\n    ? chartHeight - xAxisHeight - titleHeight\n    : chartHeight - xAxisHeight;\n\n\n  return (\n    <Base\n      width={width}\n      height={height}>\n\n      {\n        values.map((d, i) => {\n          const top = titleLayout === ELabelOrientation.HORIZONTAL\n            ? (chartHeight * i) + titleHeight\n            : (chartHeight * i);\n          const xWidth = width - Number(yAxisWidth);\n          return (<g key={`plot-${d.title}`}>\n            {\n              titleLayout === ELabelOrientation.HORIZONTAL\n                ? <g\n                  transform={`translate(${yAxisWidth}, ${(chartHeight * i) + (titleHeight / 2)})`}\n                  height={titleHeight}\n                  width={xWidth}\n                ><text\n                  fill={defaultTickFormat.stroke}\n                  fontSize=\"12px\"\n                  fontWeight=\"bold\"\n                  width={xWidth}\n\n                >{String(d.title)}\n                  </text>\n                </g>\n                :\n                <YAxis\n                  width={0}\n                  height={plotHeight}\n                  scale=\"band\"\n                  top={chartHeight * i}\n                  labelFormat={axisLabelFormat}\n                  path={{\n                    opacity: 0,\n                  }}\n                  labelOrientation={ELabelOrientation.VERTICAL}\n                  tickFormat={{\n                    fontSize: '12px',\n                    stroke: '#333',\n                  }}\n                  values={[String(d.title)]}\n                />\n            }\n            <YAxis\n              width={Number(yAxisWidth)}\n              labelFormat={axisLabelFormat}\n              height={plotHeight}\n              top={top}\n              domain={domain}\n            />\n            <XAxis\n              width={xWidth}\n              height={Number(xAxisHeight)}\n              top={((chartHeight) * (i + 1)) - Number(xAxisHeight)}\n              left={yAxisWidth}\n              labelFormat={axisLabelFormat}\n              padding={padding}\n              values={bins} />\n\n            <Bars\n              left={yAxisWidth}\n              height={plotHeight}\n              colorScheme={colorScheme}\n              groupLayout={EGroupedBarLayout.STACKED}\n              values={values[i].counts}\n              bins={bins}\n              top={top}\n              domain={domain}\n              padding={padding}\n              direction={direction}\n              tip={tip}\n              width={xWidth}\n            />\n          </g>);\n        })}\n    </Base>\n  )\n}\nexport default JoyPlot;\n","import { extent } from 'd3-array';\nimport {\n  useEffect,\n  useState,\n} from 'react';\n\nimport { IBarChartData } from '../Histogram';\n\nexport const useJoyPlot = ({\n  data,\n  height,\n  clampToZero = true,\n}: {\n  data: IBarChartData[];\n  height: number;\n  clampToZero?: boolean;\n}) => {\n  const chartHeight = height / (data.length);\n  const [bins, setBins] = useState<string[]>([]);\n  const [domain, setDomain] = useState<[number, number]>([0, 0]);\n  const [values, setValues] = useState<IBarChartData[]>([]);\n  useEffect(() => {\n    const allBins = data.reduce((p, n) => {\n      return Array.from(new Set([...p, ...n.bins]));\n    }, [] as string[])\n    setBins(allBins);\n    const allValues: IBarChartData[] = data.map((d) => {\n      const counts = d.counts.map((count) => {\n        const data = new Array(allBins.length).fill(0);\n        count.data.forEach((c, countIndex) => {\n          const allBinIndex = allBins.findIndex((b) => b === d[countIndex]);\n          data[allBinIndex] = c;\n        });\n        return count;\n      });\n      return {\n        ...d,\n        bins: allBins,\n        counts,\n      };\n    });\n    setValues(allValues);\n\n    const eachValue = allValues.reduce((prev, next) => {\n      const values = next.counts.reduce((p, n) => [...p, ...n.data], [] as number[]);\n      return [...values, ...prev];\n    }, [] as number[]);\n    if (clampToZero) {\n      eachValue.push(0);\n    }\n    const e = extent(eachValue) as [number, number];\n    if (e[0] == e[1]) {\n      e[1]++;\n    }\n\n    setDomain(e);\n\n  }, [data])\n  return ({\n    chartHeight,\n    bins,\n    domain,\n    values\n  });\n}\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","import { schemeSet3 } from 'd3-scale-chromatic';\nimport React, { FC } from 'react';\n\nimport { EChartDirection } from './BarChart';\nimport Bars, { defaultPadding } from './components/Bars/Bars';\nimport Base from './components/Base';\nimport XAxis from './components/XAxis';\nimport YAxis from './components/YAxis';\nimport {\n  EGroupedBarLayout,\n  IBarChartDataSet,\n  IHistogramBar,\n} from './Histogram';\nimport { ITornadoData } from './legacy/Tornado';\nimport { applyDomainAffordance } from './utils/domain';\n\nexport interface IProps {\n  /** @description bar colour scheme */\n  colorScheme?: string[];\n  data: ITornadoData;\n  direction?: EChartDirection;\n  groupLayout: EGroupedBarLayout;\n  height: number;\n  id?: string;\n  /** @description Height in px of the axis which labels the left/right values */\n  splitAxisHeight?: number;\n  /** @description labels for the left/right split axis  */\n  splitBins: [string, string];\n  visible?: Record<string, boolean>;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n  width: number;\n  /** @description Padding inside the chart svg */\n  chartPadding?: number;\n  /** @description bar chart bar padding */\n  padding?: IHistogramBar;\n  showBinPercentages: boolean;\n}\n\nconst Tornado: FC<IProps> = ({\n  colorScheme = schemeSet3,\n  data,\n  id = '',\n  direction = EChartDirection.HORIZONTAL,\n  groupLayout = EGroupedBarLayout.GROUPED,\n  height,\n  splitBins = ['Left', 'Right'],\n  width,\n  visible = {},\n  xAxisHeight,\n  splitAxisHeight,\n  yAxisWidth,\n  chartPadding = 15,\n  padding = defaultPadding,\n  showBinPercentages = false,\n}) => {\n  if (!yAxisWidth) {\n    yAxisWidth = direction === EChartDirection.VERTICAL ? 40 : 100;\n  }\n  if (!xAxisHeight) {\n    xAxisHeight = direction === EChartDirection.VERTICAL ? 100 : 40;\n  }\n  if (!splitAxisHeight) {\n    splitAxisHeight = direction === EChartDirection.VERTICAL ? 100 : 40;\n  }\n\n  const domain = calculateDomain(data, true);\n  const baseProps = {\n    width,\n    height,\n    chartPadding,\n  }\n\n  const dataSets: any[] = []\n  data.counts.forEach((count) => {\n    count.data.forEach((value, genderIndex) => {\n      value.forEach((aValue, rowIndex) => {\n        if (!dataSets[rowIndex]) {\n          dataSets[rowIndex] = [];\n        }\n        dataSets[rowIndex].push({\n          side: genderIndex === 0 ? 'left' : 'right',\n          groupLabel: count.label,\n          colorRef: count.label,\n          label: data.bins[rowIndex],\n          value: visible[data.bins[rowIndex]] !== false && visible[count.label] !== false ? aValue : 0,\n        });\n      })\n\n    });\n  });\n\n  const left: IBarChartDataSet[] = data.counts.map((counts, i) => {\n\n    return {\n      label: splitBins[0] + ' ' + counts.label,\n      data: direction === EChartDirection.HORIZONTAL\n        ? [...counts.data[0]].reverse()\n        : [...counts.data[0]],\n    }\n  })\n\n  const right: IBarChartDataSet[] = data.counts.map((counts, i) => {\n    return {\n      label: splitBins[1] + ' ' + counts.label,\n      data: direction === EChartDirection.HORIZONTAL\n        ? [...counts.data[1]].reverse()\n        : [...counts.data[1]],\n    }\n  });\n\n  const barWidth = direction === EChartDirection.VERTICAL\n    ? (width - yAxisWidth) - (chartPadding * 2)\n    : ((width - (2 * chartPadding)) - yAxisWidth) / 2;\n  const barHeight = direction === EChartDirection.VERTICAL\n    ? ((height - (2 * chartPadding)) - xAxisHeight) / 2\n    : (height - xAxisHeight - splitAxisHeight) - (chartPadding * 2);\n  return (\n    <Base {...baseProps}\n      width={width + 30}\n      id={id}\n    >\n      <Bars values={left}\n        colorScheme={colorScheme}\n        direction={direction}\n        inverse={direction !== EChartDirection.VERTICAL}\n        left={direction === EChartDirection.VERTICAL\n          ? splitAxisHeight + xAxisHeight\n          : yAxisWidth}\n        height={barHeight}\n        width={barWidth}\n        groupLayout={groupLayout}\n        bins={data.bins}\n        domain={domain}\n        id={`left-${id}`}\n        padding={padding}\n        showLabels={[showBinPercentages, showBinPercentages]}\n      />\n\n      <Bars values={right}\n        colorScheme={colorScheme}\n        direction={direction}\n        inverse={direction === EChartDirection.VERTICAL}\n        left={direction === EChartDirection.VERTICAL\n          ? splitAxisHeight + xAxisHeight\n          : (((width - (2 * chartPadding)) + yAxisWidth) / 2)}\n        height={barHeight}\n        width={barWidth}\n        groupLayout={groupLayout}\n        bins={data.bins}\n        domain={domain}\n        id={`right-${id}`}\n        top={direction === EChartDirection.HORIZONTAL ? 0 : barHeight}\n        padding={padding}\n        showLabels={[showBinPercentages, showBinPercentages]}\n      />\n\n      {\n        direction === EChartDirection.HORIZONTAL && <>\n          {\n            // Band axis (Left hand axis)\n          }\n          <YAxis\n            width={yAxisWidth}\n            height={barHeight}\n            scale=\"band\"\n            path={{ opacity: 0 }}\n            tickSize={0}\n            padding={padding}\n            values={[...data.bins].reverse()}\n          />\n          {\n            // Middle y axis\n          }\n          <YAxis\n            width={yAxisWidth}\n            height={barHeight}\n            left={barWidth}\n            labelFormat={() => ''}\n            padding={padding}\n            values={direction === EChartDirection.HORIZONTAL ? data.bins : undefined}\n            scale=\"band\"\n          />\n\n          {\n            // Bottom left values axis\n          }\n          <XAxis\n            width={barWidth}\n            inverse={true}\n            height={xAxisHeight}\n            top={barHeight}\n            left={yAxisWidth}\n            scale=\"linear\"\n            domain={domain}\n          />\n\n          {\n            // Bottom right values axis\n          }\n          <XAxis\n            width={barWidth}\n            height={xAxisHeight}\n            top={barHeight}\n            left={((width - (2 * chartPadding) + yAxisWidth) / 2)}\n            scale=\"linear\"\n            domain={domain}\n          />\n          {\n            // Bottom split bin axis (grouped labels)\n          }\n          <XAxis\n            height={splitAxisHeight}\n            left={yAxisWidth}\n            top={barHeight + splitAxisHeight}\n            width={baseProps.width - yAxisWidth}\n            values={splitBins}\n            path={{ opacity: 0 }}\n            scale='point'\n          />\n        </>\n      }\n      {\n\n        direction === EChartDirection.VERTICAL && <>\n          {\n            // Band axis (bottom axis)\n          }\n          <XAxis\n            width={barWidth}\n            height={yAxisWidth}\n            scale=\"band\"\n            padding={padding}\n            path={{ opacity: 0 }}\n            tickSize={0}\n            left={xAxisHeight + splitAxisHeight}\n            top={(barHeight * 2)}\n            values={[...data.bins]}\n          />\n\n          {\n            // Middle x axis\n          }\n          <XAxis\n            width={barWidth}\n            height={yAxisWidth}\n            left={xAxisHeight + splitAxisHeight}\n            labelFormat={() => ''}\n            values={data.bins}\n            top={(barHeight)}\n            scale=\"band\"\n            padding={padding}\n          />\n\n          {\n            // Top left values axis\n          }\n          <YAxis\n            width={xAxisHeight}\n            height={barHeight}\n            top={0}\n            left={splitAxisHeight}\n            scale=\"linear\"\n            domain={domain}\n          />\n\n          {\n            // Bottom left values axis\n          }\n          <YAxis\n            width={xAxisHeight}\n            height={barHeight}\n            inverse={true}\n            top={barHeight}\n            left={splitAxisHeight}\n            scale=\"linear\"\n            domain={domain}\n          />\n          {\n            // Left split bin axis (grouped labels)\n          }\n          <YAxis\n            height={barHeight * 2}\n            left={0}\n            width={splitAxisHeight}\n            values={splitBins}\n            path={{ opacity: 0 }}\n            scale='point'\n          />\n        </>\n      }\n\n    </Base>\n  )\n}\n\nexport default Tornado;\n\nconst calculateDomain = (data: ITornadoData, center = true) => {\n  const leftValues = data.counts.reduce((prev, next) => prev.concat(next.data[0]), [] as number[]);\n  const rightValues = data.counts.reduce((prev, next) => prev.concat(next.data[1]), [] as number[]);\n\n  // Use applyDomainAffordance to allow space for percentage labels\n  let domain = [\n    0,\n    applyDomainAffordance(Math.max(...rightValues)),\n  ];\n\n  // Center the 0 axis value in the middle of the chart\n  if (center) {\n    const max = Math.max(Math.max(...leftValues), domain[1]);\n    domain = [\n      0,\n      applyDomainAffordance(max),\n    ];\n  }\n  return domain;\n}\n","import {\n  event,\n  select,\n} from 'd3-selection';\n\nexport default {\n  fx: {\n    in: (container) => {\n      if (typeof container === 'string') {\n        return;\n      }\n      container?.style('left', (event.pageX) + 'px')\n        .style('top', (event.pageY - 55) + 'px');\n      container?.transition()\n        .duration(200)\n        .style('opacity', 0.9);\n    },\n    move: (container) => {\n      if (typeof container === 'string') {\n        return;\n      }\n      container?.style('left', (event.pageX) + 'px')\n        .style('top', (event.pageY - 55) + 'px');\n    },\n    out: (container) => {\n      if (typeof container === 'string') {\n        return;\n      }\n      container?.transition()\n        .duration(100)\n        .style('opacity', 0);\n    },\n  },\n};\n\nexport const makeTip = (selector, tipContainer): { tipContainer: any, tipContent: any } => {\n  if (tipContainer) {\n    // Chart could be rebuilt - remove old tip\n    tipContainer.remove();\n  }\n  tipContainer = select(selector).append('div')\n    .attr('class', 'tooltip top')\n    .style('opacity', 0);\n\n  tipContainer.append('div')\n    .attr('class', 'tooltip-arrow');\n  return {\n    tipContainer,\n    tipContent: tipContainer.append('div')\n      .attr('class', 'tooltip-inner'),\n  };\n};\n","import {\n  ScaleBand,\n  scaleBand,\n} from 'd3-scale';\nimport { schemeSet3 } from 'd3-scale-chromatic';\nimport React, {\n  FC,\n  useMemo,\n} from 'react';\n\nimport {\n  Bars,\n  XAxis,\n  YAxis,\n} from './';\nimport { EChartDirection } from './BarChart';\nimport {\n  defaultPadding,\n  IProps as IBarProps,\n} from './components/Bars/Bars';\nimport Base from './components/Base';\nimport { TLabelComponent } from './components/Label';\nimport {\n  EGroupedBarLayout,\n  IBarChartDataSet,\n} from './Histogram';\nimport {\n  paddingInner,\n  paddingOuter,\n} from './utils/bars';\nimport { useHistogramDomain } from './utils/useDomain';\n\nexport type TUpsetData = { keys: string[], value: number }[];\n\ntype TBarProps = Pick<IBarProps, 'width' | 'height' | 'top' | 'left' | 'colorScheme' | 'LabelComponent'> & {\n  data: TUpsetData,\n  axisSpace: number;\n  axisWidth?: number;\n  textFill?: string;\n};\n\nexport interface IProps {\n  colorScheme?: string[];\n  data: TUpsetData;\n  height: number;\n  hoverColorScheme?: string[];\n  showLabels?: boolean[];\n  visible?: Record<string, boolean>;\n  width: number;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n  textFill?: string;\n  distribution?: {\n    colorScheme: string[];\n    fill: {\n      active: string;\n      inactive: string;\n    };\n    label?: string;\n  };\n  setSize?: {\n    dimensions: {\n      chartWidth: number;\n      axisWidth: number;\n      height: number;\n    },\n    label?: string;\n    colorScheme: string[];\n    LabelComponent?: TLabelComponent;\n  }\n  axisSpace?: number;\n  radius?: number;\n  /** @description accessible title */\n  title: string;\n  /** @description accessible description */\n  description: string;\n}\n\nconst UpsetChart: FC<IProps> = ({\n  data,\n  width,\n  height,\n  setSize = {\n    dimensions: { chartWidth: 100, axisWidth: 100, height: 200 },\n    colorScheme: [schemeSet3[0]],\n  },\n  axisSpace = 30,\n  textFill = '#a9a9a9',\n  radius = 7,\n  distribution = {\n    colorScheme: [schemeSet3[1]],\n    fill: {\n      active: schemeSet3[1],\n      inactive: '#eee',\n    },\n    label: 'Intersection size',\n  },\n  title,\n  description,\n}) => {\n\n  const left = (setSize.dimensions.chartWidth + setSize.dimensions.axisWidth);\n  const h = height - setSize.dimensions.height;\n\n  const { bins, setBandScale } = useMemo(() => {\n    const bins = Array.from(data.reduce((prev, next) => {\n      return union<string>(new Set<string>(next.keys), prev);\n    }, new Set<string>()));\n    const setBandScale = scaleBand().domain(bins as string[])\n      .rangeRound([0, setSize.dimensions.height - axisSpace - axisSpace])\n      .paddingInner(paddingInner(defaultPadding))\n      .paddingOuter(paddingOuter(defaultPadding))\n      .align(0.5);\n    return { bins, setBandScale };\n  }, [data]);\n\n  return <Base\n    width={width}\n    title={title}\n    description={description}\n    height={height}>\n\n    <text\n      textAnchor={'middle'}\n      fill={textFill}\n      fontSize=\"12px\"\n      style={{ border: '1px solid red' }}\n      transform={`translate(${left - 20}, ${h - (h / 2)}) rotate(270)`}>\n      {distribution.label ?? 'Intersection size'}\n    </text>\n    <SetSizeBars\n      width={setSize.dimensions.chartWidth}\n      axisWidth={setSize.dimensions.axisWidth}\n      height={setSize.dimensions.height - axisSpace}\n      top={height - setSize.dimensions.height + axisSpace}\n      colorScheme={setSize.colorScheme}\n      data={data}\n      axisSpace={axisSpace}\n      textFill={textFill}\n      setBandScale={setBandScale}\n      bins={bins}\n      left={0}\n      label={setSize.label ?? 'Set size'}\n    />\n\n    <DistributionBars\n      width={width - left}\n      height={height - setSize.dimensions.height}\n      colorScheme={distribution.colorScheme}\n      left={left}\n      data={data}\n      top={0}\n      axisSpace={axisSpace}\n      textFill={textFill}\n    />\n\n    <ActiveCircles\n      data={data}\n      left={left + axisSpace}\n      radius={radius}\n      colors={distribution.fill}\n      width={width - left - axisSpace}\n      height={setSize.dimensions.height - axisSpace}\n      top={height - setSize.dimensions.height + axisSpace}\n      setBandScale={setBandScale}\n    />\n  </Base>\n}\n\ninterface IActiveCirclesProps {\n  data: TUpsetData;\n  left: number;\n  width: number;\n  height: number;\n  top: number;\n  radius: number;\n  colors?: {\n    active: string;\n    inactive: string;\n  },\n  setBandScale: ScaleBand<string>\n}\n\n/**\n * Renders a grid of circles. Highlighted if the column's data contains that key\n */\nconst ActiveCircles: FC<IActiveCirclesProps> = ({\n  data,\n  left,\n  width,\n  top,\n  radius,\n  colors = {\n    active: '#000',\n    inactive: '#eee',\n  },\n  setBandScale,\n}) => {\n  const bins = Array.from(data.reduce((prev, next) => union<string>(new Set<string>(next.keys), prev), new Set<string>()));\n  const yPoints = bins.map((bin) => Number(setBandScale(bin)) + (setBandScale.bandwidth() / 2));\n  const labels = data.map((d) => d.keys.join(' & '))\n  const bandScale = scaleBand().domain(labels as string[])\n    .rangeRound([0, width])\n    .paddingInner(paddingInner(defaultPadding))\n    .paddingOuter(paddingOuter(defaultPadding))\n    .align(0.5);\n\n  return (\n    <g transform={`translate(${left},${top})`}>\n      {\n        data.map((d) => {\n          const x = Number(bandScale(d.keys.join(' & '))) + (bandScale.bandwidth() / 2);\n          const active = bins.map((bin) => d.keys.includes(bin));\n          const bounds = active.reduce((prev, next, index) => {\n            if (!next) {\n              return prev;\n            }\n            if (prev.length === 0) {\n              prev[0] = yPoints[index];\n            } else {\n              prev[1] = yPoints[index];\n            }\n            return prev;\n          }, [] as number[]);\n          return (\n            <g\n              key={d.keys.join('.')}\n              transform={`translate(${x}, 0)`}>\n              <line x1=\"0\" y1={bounds[0]} x2=\"0\" y2={bounds[1] ?? bounds[0]} stroke={colors.active} />\n              {\n                bins.map((bin, i) => {\n                  return (\n                    <circle key={bin} cy={yPoints[i]}\n                      cx={(0 * i)} r={radius} fill={active[i] ? colors.active : colors.inactive} />\n                  )\n                })\n              }\n            </g>\n          )\n        })\n      }\n    </g>\n  );\n};\n\nconst DistributionBars: FC<TBarProps> = ({\n  LabelComponent,\n  colorScheme,\n  width,\n  height,\n  left,\n  top,\n  data,\n  axisSpace,\n}) => {\n  const bins = useMemo(() => data.map((d) => d.keys.join(' & ')), [data]);\n  const values: IBarChartDataSet[] = useMemo(() => ([{\n    label: 'segments',\n    data: data.map((d) => d.value),\n  }]), [data]);\n\n  const domain = useHistogramDomain({\n    groupLayout: EGroupedBarLayout.GROUPED,\n    bins,\n    values,\n  });\n  return (\n    <>\n      <Bars\n        bins={bins}\n        colorScheme={colorScheme}\n        direction={EChartDirection.VERTICAL}\n        domain={domain}\n        showLabels={[true]}\n        groupLayout={EGroupedBarLayout.GROUPED}\n        height={height}\n        LabelComponent={LabelComponent}\n        left={(left ?? 0) + axisSpace}\n        top={top}\n        padding={defaultPadding}\n        values={values}\n        width={width - axisSpace}\n      />\n      <YAxis\n        width={20}\n        height={height}\n        label=\"intersection size\"\n        top={top}\n        left={left}\n        scale={'linear'}\n        values={undefined}\n        domain={domain}\n      />\n    </>\n  )\n}\n\n/**\n * Shows a bar chat of the accumulated total number of records in each data point.\n */\nconst SetSizeBars: FC<TBarProps & { setBandScale: ScaleBand<string>, bins: string[], label: string }> = ({\n  width,\n  height,\n  colorScheme,\n  data,\n  top,\n  axisSpace,\n  axisWidth,\n  textFill = '#a9a9a9',\n  setBandScale,\n  bins,\n  label,\n}) => {\n  const values = useMemo(() => {\n    const empty = new Array(bins.length).fill(0);\n    const counts = data.reduce((prev, next) => {\n      next.keys.forEach((key) => {\n        const index = bins.findIndex((bin) => bin === key);\n        prev[index] = prev[index] + next.value;\n      })\n      return prev;\n    }, empty);\n    const values: IBarChartDataSet[] = [{\n      label: 'tets',\n      data: counts,\n    }];\n    return values;\n  }, [data, bins]);\n\n  const domain = useHistogramDomain({\n    groupLayout: EGroupedBarLayout.GROUPED,\n    bins: bins.reverse(),\n    values,\n  });\n  return (\n    <g className=\"size-bars\" transform={`translate(${0},${top})`}>\n      <Bars\n        bins={bins}\n        colorScheme={colorScheme}\n        direction={EChartDirection.HORIZONTAL}\n        domain={domain}\n        groupLayout={EGroupedBarLayout.GROUPED}\n        height={height - axisSpace}\n        inverse={true}\n        showLabels={[true]}\n        padding={defaultPadding}\n        values={values}\n        width={width}\n      />\n      {\n        bins.map((bin) => <text\n          key={bin}\n          x={(axisWidth ?? 0) + width}\n          fontSize=\"12px\"\n          textAnchor=\"end\"\n          fill={textFill}\n          y={Number(setBandScale(bin)) + (setBandScale.bandwidth() / 2)}\n        >\n          {bin}\n        </text>)\n      }\n      <XAxis\n        width={width}\n        height={20}\n        label=\"Set size\"\n        top={height - axisSpace}\n        scale=\"linear\"\n        values={undefined}\n        inverse={true}\n        domain={domain}\n      />\n      <text\n        x={width / 2}\n        textAnchor=\"middle\"\n        fontSize=\"12px\"\n        fill={textFill}\n        y={height}>{label}\n      </text>\n    </g>\n  )\n}\n\n\nfunction union<T>(...iterables: any): Set<T> {\n  const set = new Set<T>();\n  for (const iterable of iterables) {\n    for (const item of iterable) {\n      set.add(item);\n    }\n  }\n  return set;\n}\n\nexport default UpsetChart;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { Timer } from \"./timer.js\";\nexport default function (callback, delay, time) {\n  var t = new Timer();\n  delay = delay == null ? 0 : +delay;\n  t.restart(function (elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}","import { dispatch } from \"d3-dispatch\";\nimport { timer, timeout } from \"d3-timer\";\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\nexport default function (node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index,\n    // For context during callback.\n    group: group,\n    // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween; // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time); // If the elapsed delay is less than our first sleep, start immediately.\n\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o; // If the state is not SCHEDULED, then we previously errored on start.\n\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue; // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n\n      if (o.state === STARTED) return timeout(start); // Interrupt the active transition, if any.\n\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      } // Cancel any pre-empted transitions.\n      else if (+i < id) {\n          o.state = ENDED;\n          o.timer.stop();\n          o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n          delete schedules[i];\n        }\n    } // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n\n\n    timeout(function () {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    }); // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n\n    self.state = STARTED; // Initialize the tween, deleting null tween.\n\n    tween = new Array(n = self.tween.length);\n\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    } // Dispatch the end event.\n\n\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n\n    for (var i in schedules) {\n      return;\n    } // eslint-disable-line no-unused-vars\n\n\n    delete node.__transition;\n  }\n}","import { STARTING, ENDING, ENDED } from \"./transition/schedule.js\";\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n  if (!schedules) return;\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) {\n      empty = false;\n      continue;\n    }\n\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}","import { get, set } from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n\n      for (var t = {\n        name: name,\n        value: value\n      }, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function (name, value) {\n  var id = this._id;\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n  transition.each(function () {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n  return function (node) {\n    return get(node, id).value[name];\n  };\n}","import { color } from \"d3-color\";\nimport { interpolateNumber, interpolateRgb, interpolateString } from \"d3-interpolate\";\nexport default function (a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber : b instanceof color ? interpolateRgb : (c = color(b)) ? (b = c, interpolateRgb) : interpolateString)(a, b);\n}","import { interpolateTransformSvg as interpolateTransform } from \"d3-interpolate\";\nimport { namespace } from \"d3-selection\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function () {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function () {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function (name, value) {\n  var fullname = namespace(name),\n      i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\" ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value)) : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname) : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}","import { namespace } from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function (t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function (t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}","import { get, init } from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function () {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function () {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? delayFunction : delayConstant)(id, value)) : get(this.node(), id).delay;\n}","import { get, set } from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function () {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function () {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? durationFunction : durationConstant)(id, value)) : get(this.node(), id).duration;\n}","import { get, set } from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each(easeConstant(id, value)) : get(this.node(), id).ease;\n}","import { get, set, init } from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function (t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0,\n      on1,\n      sit = start(name) ? init : set;\n  return function () {\n    var schedule = sit(this, id),\n        on = schedule.on; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, listener) {\n  var id = this._id;\n  return arguments.length < 2 ? get(this.node(), id).on.on(name) : this.each(onFunction(id, name, listener));\n}","function removeFunction(id) {\n  return function () {\n    var parent = this.parentNode;\n\n    for (var i in this.__transition) {\n      if (+i !== id) return;\n    }\n\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function () {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}","import { selection } from \"d3-selection\";\nvar Selection = selection.prototype.constructor;\nexport default function () {\n  return new Selection(this._groups, this._parents);\n}","import { interpolateTransformCss as interpolateTransform } from \"d3-interpolate\";\nimport { style } from \"d3-selection\";\nimport { set } from \"./schedule.js\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function () {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = style(this, name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0,\n      on1,\n      listener0,\n      key = \"style.\" + name,\n      event = \"end.\" + key,\n      remove;\n  return function () {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this.styleTween(name, styleNull(name, i)).on(\"end.style.\" + name, styleRemove(name)) : typeof value === \"function\" ? this.styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant(name, i, value), priority).on(\"end.style.\" + name, null);\n}","function styleInterpolate(name, i, priority) {\n  return function (t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}","function textInterpolate(i) {\n  return function (t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, textTween(value));\n}","import { selection } from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\nvar id = 0;\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\nexport default function transition(name) {\n  return selection().transition(name);\n}\nexport function newId() {\n  return ++id;\n}\nvar selection_prototype = selection.prototype;\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};","import { selector } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}","import { selectorAll } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}","import { matcher } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nexport default function (match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}","import { Transition } from \"./index.js\";\nexport default function (transition) {\n  if (transition._id !== this._id) throw new Error();\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}","import { Transition, newId } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function () {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}","import { tweenValue } from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function () {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function () {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function (value) {\n  return this.tween(\"text\", typeof value === \"function\" ? textFunction(tweenValue(this, \"text\", value)) : textConstant(value == null ? \"\" : value + \"\"));\n}","import { set } from \"./schedule.js\";\nexport default function () {\n  var on0,\n      on1,\n      that = this,\n      id = that._id,\n      size = that.size();\n  return new Promise(function (resolve, reject) {\n    var cancel = {\n      value: reject\n    },\n        end = {\n      value: function value() {\n        if (--size === 0) resolve();\n      }\n    };\n    that.each(function () {\n      var schedule = set(this, id),\n          on = schedule.on; // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n\n        on1._.cancel.push(cancel);\n\n        on1._.interrupt.push(cancel);\n\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}","import { Transition, newId } from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport { easeCubicInOut } from \"d3-ease\";\nimport { now } from \"d3-timer\";\nvar defaultTiming = {\n  time: null,\n  // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n\n  return timing;\n}\n\nexport default function (name) {\n  var id, timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}","export function cubicIn(t) {\n  return t * t * t;\n}\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}","import { selection } from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;","import interrupt from \"../interrupt.js\";\nexport default function (name) {\n  return this.each(function () {\n    interrupt(this, name);\n  });\n}","import { Transition } from \"./transition/index.js\";\nimport { SCHEDULED } from \"./transition/schedule.js\";\nvar root = [null];\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}","export default function (d) {\n  return d;\n}","import 'd3-transition';\n\nimport { interpolate } from 'd3-interpolate';\nimport { scaleOrdinal } from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport {\n  arc,\n  Arc,\n  pie,\n  PieArcDatum,\n} from 'd3-shape';\nimport cloneDeep from 'lodash/cloneDeep';\nimport merge from 'lodash/merge';\n\nimport colorScheme from '../colors';\nimport { IBarChartDataSet } from '../Histogram';\nimport tips, { makeTip } from '../tip';\nimport { onMouseOut } from '../utils/mouseOver';\nimport { DeepPartial } from '../utils/types';\nimport {\n  IPieChartProps,\n  IPieDataItem,\n} from './PieChart';\nimport { IChartAdaptor } from './types';\n\ninterface IPieDataset {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\n\n// Function to calculate pie chart paths from data\nconst thisPie = pie()\n  .sort(null)\n  .value((d: any) => d.count);\n\n\nconst outerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? radius - 10\n    : radius - 10 - (setIndex * (donutWidth + 10));\n};\n\nconst innerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? 0\n    : radius - 10 - donutWidth - (setIndex * (donutWidth + 10));\n};\n\nconst getArc = (props, i: number) => {\n  return arc()\n    .outerRadius(outerRadius(props, i))\n    .innerRadius(innerRadius(props, i));\n}\n\nexport const pieChartD3 = ((): IChartAdaptor<IPieChartProps> => {\n\n  let tipContainer;\n  let tipContent;\n\n  const props: IPieChartProps = {\n    backgroundColor: '#ddd',\n    className: 'piechart-d3',\n    colorScheme,\n    data: {\n      bins: [],\n      counts: [],\n    },\n    donutWidth: 0,\n    height: 200,\n    hover: {\n      lighten: 0.1,\n    },\n    labels: {\n      display: true,\n      displayFn: (d) => d.value,\n    },\n    margin: {\n      bottom: 0,\n      left: 10,\n      right: 0,\n      top: 10,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number, groupLabel): string => {\n      return groupLabel + ': ' + bins[i] + '<br />' + d;\n    },\n    visible: {},\n    width: 200,\n  };\n\n  let containers: any[];\n  let svg: Selection<any, any, any, any>;\n  let dataSets: IPieDataset[][];\n  let previousData: any;\n  let storedWidth: number;\n  let storedHeight: number;\n\n  const PieChartD3 = {\n\n    create(el: Element, newProps: DeepPartial<IPieChartProps> = {}) {\n      merge(props, newProps);\n      previousData = props.data.counts.map((set: IBarChartDataSet, setIndex: number) => {\n        return set.data\n          .map((count, i) => ({\n            count,\n            groupLabel: set.label,\n            label: props.data.bins[i],\n          }));\n      });\n      this._makeSvg(el);\n      containers = [];\n      previousData.forEach((dataSet, i) => {\n        this.drawChartBg(i);\n      });\n\n      this.update(props);\n    },\n\n    _makeSvg(el: Element) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { margin, width, height, className } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', width)\n        .attr('height', height)\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .append('g')\n        .attr('transform',\n          'translate(' + margin.left + ',' + margin.top + ')');\n\n      const r = makeTip(props.tipContainer, tipContainer);\n      tipContent = r.tipContent;\n      tipContainer = r.tipContainer;\n    },\n\n    update(newProps: DeepPartial<IPieChartProps>) {\n      if (!props.data) {\n        return;\n      }\n      merge(props, newProps);\n      if (newProps.data) {\n        props.data = cloneDeep(newProps.data) as IPieChartProps['data'];\n      }\n      if (props.colorScheme) {\n        props.colorScheme = props.colorScheme;\n      }\n      if (!props.data.bins) {\n        return;\n      }\n\n      this.drawCharts();\n    },\n\n    drawCharts() {\n      const { data, visible } = props;\n      dataSets = data.counts.map((set: IBarChartDataSet) => {\n        return set.data\n          .map((count, i) => ({\n            count: visible[data.bins[i]] !== false ? count : 0,\n            groupLabel: set.label,\n            label: data.bins[i],\n          }));\n      });\n\n      dataSets.forEach((dataSet, i) => {\n        const theme = data.counts[i]?.colors ?? props.colorScheme;\n        this.drawChart(dataSet, i, data.bins, theme);\n        this.drawLabels(dataSet, i, data.bins, theme);\n      });\n      previousData = dataSets;\n    },\n\n    drawChartBg(i: number) {\n      const { backgroundColor, width, height } = props;\n      const tau = 2 * Math.PI; // http://tauday.com/tau-manifesto\n      const bgArc = arc()\n        .innerRadius(innerRadius(props, i))\n        .outerRadius(outerRadius(props, i))\n        .startAngle(0)\n        .endAngle(tau);\n      const container = svg\n        .append('g')\n        .attr('class', 'pie-bg');\n      const background = container.append('path')\n        .attr('class', 'pie-background')\n        .style('fill', backgroundColor);\n      background.enter()\n        .attr('transform', 'translate(' + Number(width) / 2 + ',' + height / 2 + ')')\n        .attr('d', bgArc);\n\n      background.merge(background);\n\n      if (!containers[i]) {\n        svg\n          .append('g')\n          .attr('class', 'pie-container')\n\n        svg\n          .append('g')\n          .attr('class', 'pie-labels')\n        containers[i] = svg;\n      }\n    },\n\n    drawChart(data, i: number, bins: string[], theme: string[]) {\n      const { width, height, tip, tipContentFn, hover } = props;\n\n      // Formatted pie chart arcs based on previous current data.\n      // If data has changed length (i.e. swapping the entire dataset) use the new data.\n      const prev = previousData[i].length === data.length\n        ? previousData[i]\n        : data;\n      const arcs = thisPie(prev);\n      const colors = scaleOrdinal(theme);\n      // Set the domain to get consistent colours\n      colors.domain(Array.from(new Array(data.length).keys()).map(s => s.toString()));\n\n      // Stack multiple charts in concentric circles\n      const thisArc = getArc(props, i);\n\n      const path = containers[i].select('.pie-container').selectAll('path')\n        .data(thisPie(data));\n\n      path.enter()\n        .append('path')\n        .attr('transform', (d) => {\n          return 'translate(' + Number(width) / 2 + ',' + height / 2 + ')';\n        })\n        .attr('stroke', '#FFF')\n        .attr('fill', (_, j) => colors(j))\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .attr('d', thisArc)\n        .style('opacity', 0)\n        .transition()\n        .duration(500)\n        .style('opacity', 1);\n\n      // Fade in when adding (merge)\n      path\n        .merge(path)\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .transition()\n        .delay(400)\n        .duration(500)\n        .attrTween('d', arcTween(thisArc));\n\n      path.exit().transition()\n        .attrTween('d', arcTween(thisArc))\n        .duration(500)\n        .style('opacity', 0).remove();\n    },\n\n    drawLabels(data, i: number, bins: string[], theme: string[]) {\n      const { labels, width, height } = props;\n      const thisArc = getArc(props, i);\n      const path2 = containers[i].select('.pie-labels').selectAll('text.label')\n        .data(thisPie(data));\n      path2.enter().append('text')\n        .attr('class', 'label')\n        .each(() => {\n          // Store initial offset incase we change chart heights.\n          storedHeight = height;\n          storedWidth = Number(width);\n        })\n        .style('opacity', 0)\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => labels.display === false || d.value === 0 ? 0 : 1);\n\n      path2\n        .merge(path2)\n        .transition()\n        .duration(500)\n        .style('opacity', 0)\n        .transition()\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => {\n          // Only show if the new value is not 0 and labels are set to be displayed\n          return labels.display === false || d.value === 0 ? 0 : 1;\n        });\n\n      path2.exit().transition()\n        .duration(500)\n        .style('opacity', 0);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n\n  return PieChartD3;\n});\n\n// Returns a tween for a transition’s \"d\" attribute, transitioning any selected\n// arcs from their current angle to the specified new angle.\nfunction arcTween(this: any, thisArc: Arc<any, any>) {\n  return function (this: any, d) {\n    const i = interpolate(this._current, d);\n    this._current = i(0);\n    return function (this: any, t) {\n      return thisArc(i(t));\n    };\n  };\n}\n","import constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport { tau } from \"./math.js\";\nexport default function () {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    } // Optionally sort the arcs by previously-computed values or by data.\n\n\n    if (sortValues != null) index.sort(function (i, j) {\n      return sortValues(arcs[i], arcs[j]);\n    });else if (sort != null) index.sort(function (i, j) {\n      return sort(data[i], data[j]);\n    }); // Compute the arcs! They are stored in the original data's order.\n\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function (_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function (_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function (_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  EColorManipulations,\n  IBarChartDataSet,\n} from '../Histogram';\nimport { DeepPartial } from '../utils/types';\nimport { pieChartD3 } from './PieChartD3';\nimport {\n  IChartAdaptor,\n  IChartState,\n  IMargin,\n  TipContentFn,\n} from './types';\n\ninterface ILabels {\n  display: boolean;\n  displayFn: (d: any, ix: number) => string | number;\n}\n\nexport interface IPieDataItem {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\nexport interface IPieChartProps {\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  backgroundColor: string;\n  className: string;\n  colorScheme: string[];\n  donutWidth: number;\n  height: number;\n  hover?: Partial<Record<EColorManipulations, number>>,\n  labels: ILabels;\n  margin: IMargin;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * PieChart component\n */\nclass PieChart extends Component<DeepPartial<IPieChartProps>, IChartState> {\n\n  private chart: IChartAdaptor<IPieChartProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IPieChartProps>) {\n    super(props);\n    this.chart = pieChartD3();\n\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.create(el, this.getChartState());\n      if (this.props.width === '100%') {\n        window.addEventListener('resize', (e) => this.handleResize());\n        this.handleResize();\n      }\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.update(this.getChartState());\n    }\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IPieChartProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.destroy();\n    }\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"piechart-chart-container\"></div>);\n  }\n}\n\nexport default PieChart;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","export var slice = Array.prototype.slice;","export default function (x) {\n  return x;\n}","import { slice } from \"./array\";\nimport identity from \"./identity\";\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + (x + 0.5) + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + (y + 0.5) + \")\";\n}\n\nfunction number(scale) {\n  return function (d) {\n    return +scale(d);\n  };\n}\n\nfunction center(scale) {\n  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.\n\n  if (scale.round()) offset = Math.round(offset);\n  return function (d) {\n    return +scale(d) + offset;\n  };\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain() : tickValues,\n        format = tickFormat == null ? scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + 0.5,\n        range1 = +range[range.length - 1] + 0.5,\n        position = (scale.bandwidth ? center : number)(scale.copy()),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n    path = path.merge(path.enter().insert(\"path\", \".tick\").attr(\"class\", \"domain\").attr(\"stroke\", \"currentColor\"));\n    tick = tick.merge(tickEnter);\n    line = line.merge(tickEnter.append(\"line\").attr(\"stroke\", \"currentColor\").attr(x + \"2\", k * tickSizeInner));\n    text = text.merge(tickEnter.append(\"text\").attr(\"fill\", \"currentColor\").attr(x, k * spacing).attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n      tickExit = tickExit.transition(context).attr(\"opacity\", epsilon).attr(\"transform\", function (d) {\n        return isFinite(d = position(d)) ? transform(d) : this.getAttribute(\"transform\");\n      });\n      tickEnter.attr(\"opacity\", epsilon).attr(\"transform\", function (d) {\n        var p = this.parentNode.__axis;\n        return transform(p && isFinite(p = p(d)) ? p : position(d));\n      });\n    }\n\n    tickExit.remove();\n    path.attr(\"d\", orient === left || orient == right ? tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter : \"M0.5,\" + range0 + \"V\" + range1 : tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",0.5H\" + range1);\n    tick.attr(\"opacity\", 1).attr(\"transform\", function (d) {\n      return transform(position(d));\n    });\n    line.attr(x + \"2\", k * tickSizeInner);\n    text.attr(x, k * spacing).text(format);\n    selection.filter(entering).attr(\"fill\", \"none\").attr(\"font-size\", 10).attr(\"font-family\", \"sans-serif\").attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n    selection.each(function () {\n      this.__axis = position;\n    });\n  }\n\n  axis.scale = function (_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function () {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function (_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function (_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function (_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function (_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function (_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function (_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function (_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { DeepPartial } from '../utils/types';\nimport { scatterPlotD3 } from './ScatterPlotD3';\nimport {\n  IChartAdaptor,\n  IChartState,\n} from './types';\n\nexport interface IScatterPlotProps {\n  choices: string[];\n  className: string;\n  data: {\n    keys: string[],\n    values: any[];\n  };\n  delay: number;\n  distModels: string[];\n  duration: number;\n  height: number;\n  legendWidth: number;\n  colorScheme: string[];\n  padding: number;\n  radius: number;\n  split: string;\n  width: string | number;\n}\nclass ScatterPlot extends Component<DeepPartial<IScatterPlotProps>, IChartState> {\n\n  private chart: IChartAdaptor<IScatterPlotProps>;\n  private ref: HTMLDivElement | null = null;\n\n  public static defaultProps = {\n    height: 400,\n    width: '100%',\n  };\n\n  constructor(props: IScatterPlotProps) {\n    super(props);\n    this.chart = scatterPlotD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    const { width } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  private getChartState(): DeepPartial<IScatterPlotProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  public componentWillReceiveProps(props: DeepPartial<IScatterPlotProps>) {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  public componentWillUnmount() {\n    const { width } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    this.chart.destroy();\n  }\n\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  public render() {\n    return <div ref={(ref) => this.ref = ref} className=\"scatterplot-chart-container\"></div>;\n  }\n}\n\nexport default ScatterPlot;\n","import { extent } from 'd3-array';\nimport {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport {\n  scaleLinear,\n  scaleOrdinal,\n} from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport merge from 'lodash/merge';\n\nimport colorScheme from '../colors';\nimport { IChartPoint } from '../LineChart';\nimport { DeepPartial } from '../utils/types';\nimport { IScatterPlotProps } from './ScatterPlot';\nimport { IChartAdaptor } from './types';\n\nexport type IChartPointValue = number | string | Date | object;\n\nexport const scatterPlotD3 = ((): IChartAdaptor<IScatterPlotProps> => {\n  let svg: Selection<any, any, any, any>;\n  const yScale = scaleLinear();\n  const xScale = scaleLinear();\n  const domainByTrait = {};\n  let xAxis;\n  let color;\n  let yAxis;\n\n  const props: IScatterPlotProps = {\n    choices: [],\n    className: 'scatter-plot-d3',\n    colorScheme,\n    data: {\n      keys: [],\n      values: []\n    },\n    delay: 0,\n    distModels: [],\n    duration: 400,\n    height: 300,\n    legendWidth: 100,\n    padding: 20,\n    radius: 4,\n    split: '',\n    width: '100%',\n  };\n\n  const GenerateChart = {\n\n    /**\n     * Initialization\n     */\n    create(el: Element, newProps: DeepPartial<IScatterPlotProps> = props) {\n      merge(props, newProps);\n      this._makeSvg(el, props.data);\n      this.update(newProps);\n    },\n\n    /**\n     * Make the SVG container element\n     * Recreate if it previously existed\n     */\n    _makeSvg(el: Element, data: IScatterPlotProps['data']) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { width, className, height, legendWidth, padding } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', Number(width) + padding + legendWidth)\n        .attr('height', height + padding)\n        .append('g')\n        .attr('transform', 'translate(' + padding + ',' + padding / 2 + ')');\n\n      color = scaleOrdinal(props.colorScheme);\n    },\n\n    /**\n     * Draw the chart scales\n     */\n    _drawScales(data: IScatterPlotProps['data']['keys']) {\n      const { height, padding, width } = props;\n      const xSize = Number(width) / data.length;\n      const ySize = height / data.length;\n      xScale.range([padding / 2, xSize - padding / 2]);\n      yScale.range([height - padding / 2, padding / 2]);\n\n      svg.selectAll('.x.axis')\n        .data(data)\n        .enter().append('g')\n        .attr('class', 'x axis')\n        .attr('transform', (d, i) =>\n          'translate(' + (data.length - i - 1) * xSize + ',0)')\n        .each(function (this: any, d: any) {\n          xScale.domain(domainByTrait[d]);\n          select(this).call(xAxis);\n        });\n\n      svg.selectAll('.y.axis')\n        .data(data)\n        .enter().append('g')\n        .attr('class', 'y axis')\n        .attr('transform', (d: any, i: number) => 'translate(0,' + i * ySize + ')')\n        .each(function (this: any, d: any) {\n          yScale.domain(domainByTrait[d]);\n          select(this).call(yAxis);\n        });\n    },\n\n    /**\n     * Make a legend showing spit choice options\n     */\n    _drawLegend() {\n      const { choices, padding, width, split } = props;\n      if (choices === undefined) {\n        return;\n      }\n      const legend = svg.append('g')\n        .attr('transform', 'translate(' + (Number(width) + padding / 2) +\n          ', ' + (padding + 50) + ')');\n\n      legend.append('g').append('text')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dy', '.71em')\n        .text((d) => split);\n      legend.selectAll('.legendItem')\n        .data(choices)\n        .enter().append('g')\n        .each(function (this: any, c, i: number) {\n          const cell = select(this);\n          cell.append('rect')\n            .attr('class', 'legendItem')\n            .attr('x', 0)\n            .attr('y', 20 + (i * 15))\n            .attr('fill', color(i))\n            .attr('height', 10)\n            .attr('width', 10);\n\n          cell.append('text')\n            .attr('x', 15)\n            .attr('y', 20 + (i * 15))\n            .attr('dy', '.71em')\n            .text((d) => c);\n        });\n\n      legend.exit().remove();\n    },\n\n    /**\n     * Draw scatter points\n     */\n    _drawPoints(traits, width: number, height: number) {\n      const { data, delay, duration,\n        choices, split, padding, radius } = props;\n      const n = traits.length;\n      const cell = svg.selectAll('.cell')\n        .data(cross(traits, traits))\n        .enter().append('g')\n        .attr('class', 'cell')\n        .attr('transform', (d) => 'translate(' + (n - d.i - 1) * width +\n          ',' + d.j * width + ')')\n        .each(plot);\n\n      // Titles for the diagonal.\n      cell.filter((d) => d.i === d.j).append('text')\n        .attr('x', padding)\n        .attr('y', padding)\n        .attr('dy', '.71em')\n        .text((d) => d.x);\n\n      /**\n       * Plot a point\n       */\n      function plot(this: any, p: IChartPoint) {\n        const plotCell = select(this);\n        let circle: Selection<SVGCircleElement, any, any, any>;\n        xScale.domain(domainByTrait[Number(p.x)]);\n        yScale.domain(domainByTrait[Number(p.y)]);\n\n        plotCell.append<SVGRectElement>('rect')\n          .attr('class', 'frame')\n          .attr('x', padding / 2)\n          .attr('y', padding / 2)\n          .attr('width', width - padding)\n          .attr('height', height - padding);\n\n        circle = plotCell.selectAll('circle')\n          .data(data.values)\n          .enter().append('circle')\n          .attr('r', (d) => radius)\n          .attr('cx', (d) => Number(xScale(d[Number(p.x)])))\n          .attr('cy', (d) => Number(yScale(d[Number(p.y)])))\n          .style('fill', (d) => {\n            if (d[split]) {\n              const i = choices.findIndex((c) => c === d[split]);\n              return color(i);\n            }\n            return '#eeaabb';\n          });\n\n        circle\n          .transition()\n          .duration(duration)\n          .delay(delay)\n          .attr('r', (d) => radius);\n      }\n\n      /**\n       * Create cross array\n       * // @TODO looks like d3 has its own cross function now...\n       */\n      function cross(a, b) {\n        const c: { x: number; i: number; y: number; j: number; }[] = [];\n        const nx = a.length;\n        const m = b.length;\n        let i: number;\n        let j: number;\n        for (i = -1; ++i < nx;) {\n          for (j = -1; ++j < m;) {\n            c.push({ x: a[i], i, y: b[j], j });\n          }\n        }\n        return c;\n      }\n    },\n\n    /**\n     * Update chart\n     */\n    update(newProps: DeepPartial<IScatterPlotProps>) {\n      merge(props, newProps);\n      if (!props.data) {\n        return;\n      }\n      const { data, distModels, height, width } = props;\n      this._drawLegend();\n      const traits = data.keys.filter((k) => distModels.indexOf(k) !== -1);\n      const xSize = Number(width) / traits.length;\n      const ySize = height / traits.length;\n      const n = traits.length;\n\n      traits.forEach((trait) => {\n        domainByTrait[trait] = extent<any>(data.values, (d) => d[trait]);\n      });\n      xAxis = axisBottom(xScale)\n        .ticks(6)\n        .tickSize(xSize * n);\n      yAxis = axisLeft(yScale)\n        .ticks(6)\n        .tickSize(-ySize * n);\n\n      this._drawScales(traits);\n      this._drawPoints(traits, xSize, ySize);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n  return GenerateChart;\n});\n","import { ISVGLineStyle } from '../legacy/types';\n\n/**\n * Apply style object to a d3 selection\n * @param {Object} selection D3 selection\n * @param {Object} style Css styling\n * @return {Object} selection\n */\nexport default (selection: any, style: ISVGLineStyle) => {\n  (Object.keys(style) as (keyof ISVGLineStyle)[]).forEach((k) => {\n    selection.attr(k, style[k]);\n  });\n  return selection;\n};\n","\nimport { IAxes } from './legacy/types';\n\nexport const gridHeight = (props: any): number => {\n  const { height, margin, axis } = props;\n  return height - (margin.top * 2) - xAxisHeight(axis);\n};\n\nexport const yAxisWidth = (axis: IAxes) => {\n  return axis.y.label === ''\n    ? axis.y.width\n    : axis.y.width + 30;\n};\n\nexport const xAxisHeight = (axis: IAxes) => {\n  return axis.x.label === ''\n    ? axis.x.height\n    : axis.x.height + 30 + (axis?.x?.margin ?? 0);\n};\n\nexport const gridWidth = (props: any): number => {\n  const { axis, width, margin } = props;\n  return width - (margin.left * 2) - yAxisWidth(axis);\n};\n","import {\n  select,\n  Selection,\n} from 'd3-selection';\n\nimport { IMargin } from '../legacy/types';\n\nexport type TSelection = Selection<any, any, any, any>;\nexport type TTextSelection = Selection<SVGTextElement, any, any, any>;\n\ninterface ISizeProps {\n  margin: IMargin;\n  width: number | string;\n  height: number | string;\n  className: string;\n}\n\nexport const makeSvg = (el: Element, svg: TSelection | undefined, svgId?: string): TSelection => {\n  if (svg) {\n    svg.selectAll('svg > *').remove();\n    svg.remove();\n    const childNodes = el.getElementsByTagName('svg');\n    if (childNodes.length > 0) {\n      el.removeChild(childNodes[0]);\n    }\n  }\n  // Reference to svg element containing chart\n  svg = select(el).append('svg');\n  // If svg id passed in (for download target) then assign it\n  if (svgId) {\n    svg.attr('id', svgId);\n  }\n  return svg;\n}\n\nexport const sizeSVG = (svg: TSelection | undefined, props: ISizeProps) => {\n  if (!svg) {\n    return;\n  }\n  const { margin, width, height, className } = props;\n  svg.attr('class', className)\n    .attr('width', width)\n    .attr('height', height)\n    .attr('viewBox', `0 0 ${width} ${height}`)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n};\n\nexport const makeGrid = (svg: TSelection): [TSelection, TSelection] => {\n  const gridX = svg.append('g')\n    .attr('class', 'grid gridX');\n  const gridY = svg.append('g')\n    .attr('class', 'grid gridY');\n  return [gridX, gridY];\n}\n\nexport const makeScales = (svg: TSelection): [TSelection, TSelection, TSelection, TSelection, TSelection, TSelection] => {\n  return [\n    svg.append('g').attr('class', 'x-axis'),\n    svg.append('g').attr('class', 'y-axis'),\n    svg.append('g'),\n    svg.append('g'),\n    svg.append('g').attr('class', 'x-axis-bottom'),\n    svg.append('g').attr('class', 'y-axis-left'),\n  ];\n};\n","import {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport { format } from 'd3-format';\nimport {\n  scaleBand,\n  scaleLinear,\n  scaleOrdinal,\n  scalePoint,\n} from 'd3-scale';\nimport { Selection } from 'd3-selection';\nimport { timeFormat } from 'd3-time-format';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nimport colorScheme from '../colors';\nimport attrs from '../d3/attrs';\nimport {\n  gridHeight,\n  gridWidth,\n  xAxisHeight,\n  yAxisWidth,\n} from '../grid';\nimport {\n  EGroupedBarLayout,\n  IGroupData,\n  IGroupDataItem,\n} from '../Histogram';\nimport tips, { makeTip } from '../tip';\nimport {\n  getBarWidth,\n  groupedBarsUseSameXAxisValue,\n  groupedPaddingInner,\n  paddingInner,\n} from '../utils/bars';\nimport {\n  axis as defaultAxis,\n  grid as defaultGrid,\n} from '../utils/defaults';\nimport {\n  applyDomainAffordance,\n  shouldFormatTick,\n  ticks,\n  tickSize,\n} from '../utils/domain';\nimport {\n  onClick,\n  onMouseOut,\n  onMouseOver,\n} from '../utils/mouseOver';\nimport {\n  makeGrid,\n  makeScales,\n  makeSvg,\n  sizeSVG,\n  TSelection,\n} from '../utils/svg';\nimport { DeepPartial } from '../utils/types';\nimport {\n  ITornadoDataSet,\n  ITornadoProps,\n} from './Tornado';\n\nexport const maxValueCount = (counts: ITornadoDataSet[]): number => {\n  return counts.reduce((a: number, b: ITornadoDataSet): number => {\n    return b.data.length > a ? b.data.length : a;\n  }, 0);\n};\n\n// The height for the x axis labels showing the left/right labels.\nconst SPLIT_AXIS_HEIGHT = 20;\n\nconst calculatePercents = (groupData: IGroupData) => {\n  const totals = groupData.reduce((prev, next) => {\n\n    next.forEach((datum, i) => {\n      const side = datum.side!;\n      const groupLabel = datum.groupLabel!;\n      if (!prev[groupLabel]) {\n        prev[groupLabel] = { left: 0, right: 0 };\n      }\n      prev[groupLabel][side] = prev[groupLabel][side] + datum.value;\n    })\n    return prev;\n  }, {} as Record<string, { left: number, right: number }>);\n\n\n  return groupData.map((data, i) => {\n    return data.map((datum) => {\n      const side = datum.side!;\n      const groupLabel = datum.groupLabel!;\n      const total = totals[groupLabel][side];\n      return {\n        ...datum,\n        percent: total === 0 ? 0 : Math.round(datum.value / total * 100),\n      }\n    })\n\n  });\n}\n\nexport class TornadoD3 {\n  svg: undefined | Selection<any, any, any, any>;;\n  tipContainer;\n  tipContent;\n  x = scaleLinear();\n  y = scaleBand();\n  innerScaleBand = scaleBand();\n  container: undefined | Selection<SVGElement, any, any, any>;\n  dataSets: IGroupData = [[]];\n  gridX: undefined | TSelection;\n  gridY: undefined | TSelection;\n  yAxisContainer: undefined | TSelection;\n  xAxisContainer: undefined | TSelection;\n  xAxisContainer2: undefined | TSelection;\n  yAxisLabel: undefined | TSelection;\n  xAxisLabel: undefined | TSelection;\n  domain: [number, number] = [0, 0];\n\n  props: ITornadoProps = {\n    axis: cloneDeep(defaultAxis),\n    bar: {\n      grouped: {\n        paddingInner: 0.1,\n        paddingOuter: 0,\n      },\n      paddingInner: 0.1,\n      paddingOuter: 0,\n      overlayMargin: 0.1,\n    },\n    className: 'torando-d3',\n    colorScheme,\n    center: true,\n    data: {\n      bins: [],\n      colorScheme: [],\n      counts: [],\n    },\n    delay: 0,\n    domain: {\n      max: null,\n      min: null,\n    },\n    duration: 400,\n    grid: defaultGrid,\n    groupLayout: EGroupedBarLayout.GROUPED,\n    height: 200,\n    margin: {\n      bottom: 0,\n      left: 5,\n      right: 0,\n      top: 5,\n    },\n    showBinPercentages: false,\n    splitBins: ['Left', 'Right'],\n    stroke: {\n      color: '#005870',\n      dasharray: '',\n      linecap: 'butt',\n      width: 0,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number): string =>\n      bins[i] + '<br />' + d,\n    visible: {},\n    width: 200,\n  };\n\n  /**\n   * Initialization\n   */\n  create(el: Element, newProps: DeepPartial<ITornadoProps> = {}) {\n    const { props } = this;\n    this.mergeProps(newProps);\n    this.svg = makeSvg(el, undefined);\n    const { margin, width, height, className } = props;\n    sizeSVG(this.svg, { margin, width, height, className });\n    const r = makeTip(props.tipContainer, this.tipContainer);\n    this.tipContent = r.tipContent;\n    this.tipContainer = r.tipContainer;\n    [this.gridX, this.gridY] = makeGrid(this.svg);\n\n    // Used to display the 2 split bin labels\n    this.xAxisContainer2 = this.svg.append('g').attr('class', 'xAxisContainer2');\n    this.container = this.svg\n      .append<SVGElement>('g')\n      .attr('class', 'histogram-container');\n\n    // Render Axis above bars so that we can see the y axis overlaid\n    [this.xAxisContainer, this.yAxisContainer, this.xAxisLabel, this.yAxisLabel] = makeScales(this.svg);\n\n    this.update(props);\n  }\n\n  /**\n   * Draw Axes\n   */\n  drawAxes() {\n    const { props, svg, x, y, innerScaleBand, yAxisContainer, domain, xAxisContainer, xAxisContainer2 } = this;\n    const { bar, data, groupLayout, margin, width, height, axis } = props;\n    const valuesCount = maxValueCount(data.counts);\n    const w = gridWidth(props);\n    const h = gridHeight(props) - SPLIT_AXIS_HEIGHT;\n    const dataLabels = data.counts.map((c) => c.label);\n\n    y.domain(data.bins)\n      .rangeRound([h, 0])\n      .paddingInner(groupedPaddingInner(bar));\n\n    innerScaleBand\n      .domain(groupedBarsUseSameXAxisValue({ groupLayout }) ? ['main'] : dataLabels)\n      .rangeRound([0, y.bandwidth()])\n      .paddingInner(paddingInner(props.bar));\n\n    const xAxis = axisBottom<number>(x)\n      .tickFormat((v) => {\n        const n = v.toString().replace('-', '');\n\n        if (shouldFormatTick(axis.x)) {\n          if (axis.x.scale === 'time') {\n            return timeFormat(axis.x.dateFormat ?? '')(new Date(n));\n          }\n          return isNaN(Number(v)) ? n : format(axis.x.numberFormat ?? '')(Number(n))\n        }\n        return n;\n      });\n\n    tickSize({\n      axis: xAxis,\n      axisLength: w,\n      scaleBand: x,\n      axisConfig: axis.x,\n      limitByValues: false,\n      valuesCount: 10,\n    });\n\n    this.calculateDomain();\n\n    const x2 = scalePoint<any>();\n\n    const xGroupAxis = axisBottom(x2).tickPadding(SPLIT_AXIS_HEIGHT)\n      .tickSize(0)\n\n    x2.range([Number(width) / 4, Number(width) * (3 / 4) - (margin.top * 2) - axis.y.width])\n      .domain(props.splitBins);\n\n    /** Y-Axis (label axis) set up */\n    const yAxis = axisLeft<string>(y);\n    ticks({\n      axis: yAxis,\n      valuesCount,\n      axisLength: h,\n      axisConfig: axis.y,\n      scaleBand: y,\n      limitByValues: true,\n    });\n\n\n    // @TODO - Stacked? (was using appendDomainRange())\n    x.range([0, Number(width) - (margin.top * 2) - axis.y.width])\n      .domain(this.domain)\n      .nice();\n\n    const xAxisY = height - xAxisHeight(props.axis) - margin.top - SPLIT_AXIS_HEIGHT;\n    xAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        xAxisY + ')')\n      .call(xAxis);\n\n    xAxisContainer2\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        (xAxisY) + ')')\n      .call(xGroupAxis);\n\n\n    // Move the y axis ticks to the left of the chart (need to go after the x axis range set up)\n    yAxis.tickPadding(Number(x(0)) + 10)\n    yAxisContainer\n      // Place the y axis in the middle of the chart\n      ?.attr('transform', 'translate(' + (yAxisWidth(axis) + Number(x(0))) + ', ' + margin.top + ' )')\n      .call(yAxis);\n    attrs(svg?.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y?.style ?? {} as any);\n    attrs(svg?.selectAll('.y-axis .tick text'), axis.y?.text?.style ?? {} as any);\n\n    attrs(svg?.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x?.style ?? {} as any);\n    attrs(svg?.selectAll('.x-axis .tick text'), axis.x?.text?.style ?? {} as any);\n  }\n\n  calculateDomain() {\n    const { props } = this;\n    const { data, center } = props;\n    const leftValues = data.counts.reduce((prev, next) => prev.concat(next.data[0]), [] as number[]);\n    const rightValues = data.counts.reduce((prev, next) => prev.concat(next.data[1]), [] as number[]);\n\n    // Use applyDomainAffordance to allow space for percentage labels\n    this.domain = [\n      applyDomainAffordance(-Math.max(...leftValues)),\n      applyDomainAffordance(Math.max(...rightValues)),\n    ];\n\n    // Center the 0 axis value in the middle of the chart\n    if (center) {\n      const max = Math.max(Math.max(...leftValues), this.domain[1]);\n      this.domain = [\n        applyDomainAffordance(-max),\n        applyDomainAffordance(max)];\n    }\n    return this.domain;\n  }\n\n  /**\n   * Draw a single data set into the chart\n   */\n  updateChart(\n    bins: string[],\n    groupData: IGroupData,\n  ) {\n    const { props, container, tipContainer, yAxisLabel, x, innerScaleBand, tipContent, y } = this;\n    const { axis, height, margin, delay, duration, tip, showBinPercentages } = props;\n\n    const percentData = calculatePercents(groupData);\n\n    const stackedOffset = (d: IGroupDataItem, stackIndex: number) => {\n      const w = d.side === 'left' ? -d.value : d.value;\n      return x(Math.min(0, w));\n    }\n\n    const colors = scaleOrdinal(props.colorScheme);\n    const gWidth = gridWidth(props);\n\n    const g = container\n      ?.selectAll<SVGElement, {}>('g')\n      .data(percentData);\n\n    const bars = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const xX = yAxisWidth(axis);\n        return `translate(${xX}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('rect')\n      .data((d) => d);\n\n    bars\n      ?.enter()\n      .append<SVGElement>('rect')\n      .attr('width', 0)\n      .attr('x', (d) => Number(x(0)))\n      .attr('class', (d) => `bar ${d.side}`)\n      .on('click', onClick(props.onClick))\n      .on('mouseover', onMouseOver({ bins, hover: props.bar.hover, colors, tipContentFn: props.tipContentFn, tipContent, tip, tipContainer }))\n      .on('mousemove', () => tip.fx.move(tipContainer))\n      .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n      .merge(bars)\n      .attr('y', (d: IGroupDataItem, i: number) => {\n        const overlay = (props.groupLayout === EGroupedBarLayout.OVERLAID)\n          ? Math.floor(i / 2) * props.bar.overlayMargin\n          : Number(innerScaleBand(String(d.groupLabel)));\n        return overlay;\n      })\n      .attr('height', (d, i) => getBarWidth(Math.floor(i / 2), props.groupLayout, props.bar, innerScaleBand))\n      .attr('fill', (d, i) => colors(String(d.groupLabel)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', Number(stackedOffset))\n      .attr('width', (d: IGroupDataItem): number => {\n        const w = d.side === 'left' ? -d.value : d.value;\n        return Math.abs(Number(x(w)) - Number(x(0)));\n      });\n\n    const percents = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const xX = yAxisWidth(axis);\n        return `translate(${xX}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('text')\n      .data((d) => d);\n\n    percents\n      ?.enter()\n      .append<SVGElement>('text')\n      .attr('width', 0)\n      .attr('x', (d) => {\n        const w = d.side === 'left' ? -40 : 40;\n        return Number(x(0)) + w;\n      })\n      .attr('class', 'percentage-label')\n      .style('text-anchor', 'middle')\n      .style('font-size', '0.675rem')\n      .merge(percents)\n      .text((d, i) => {\n        return showBinPercentages ? `${d.percent}%` : '';\n      })\n      .attr('y', (d: IGroupDataItem, i: number) => {\n        const h = getBarWidth(0, props.groupLayout, props.bar, innerScaleBand);\n        const offset = h / 2;\n\n        // Ensure that percentage labels don't overlap\n        const verticalOffset = i < 2 ? 0 : 14;\n        return offset + verticalOffset;\n      })\n      .attr('fill', (d, i) => colors(String(d.groupLabel)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', (d) => {\n        const w = d.side === 'left' ? - 20 : 20;\n        const v = d.side === 'left' ? -d.value : d.value;\n        return Number(x(v)) + w;\n      })\n      .attr('width', (d: IGroupDataItem): number => {\n        const w = d.side === 'left' ? -d.value : d.value;\n        return Math.abs(Number(x(w)) - Number(x(0)));\n      });\n\n    percents?.exit().remove();\n\n    bars?.exit().remove();\n    g?.exit().remove();\n\n    const yText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.y.label ?? '']);\n\n    yText?.enter().append('text')\n      .attr('class', 'y-axis-label')\n      .merge(yText)\n      .attr('transform',\n        'translate(' + 0 + ' ,' +\n        ((height - yAxisWidth(props.axis) - (margin.left * 2))) + ')')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n\n    const xText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.x.label ?? '']);\n\n    xText?.enter().append('text')\n      .attr('class', 'x-axis-label')\n      .merge(xText)\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0)\n      .attr('x', 0 - (gWidth / 2 - (margin.top * 2)))\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n  }\n\n  mergeProps(newProps: DeepPartial<ITornadoProps>) {\n    const { props } = this;\n\n    const customerizer = (objValue, srcValue, key, object, source, stack) => {\n      if (['data'].includes(key)) {\n        return srcValue;\n      }\n    }\n    mergeWith(props, newProps, customerizer);\n  }\n\n  /**\n   * Update chart\n   */\n  update(newProps: DeepPartial<ITornadoProps>) {\n    const { props } = this;\n    if (!props.data) {\n      return;\n    }\n    if (!props.data.bins) {\n      return;\n    }\n    this.mergeProps(newProps);\n    const { margin, width, height, className, data, visible } = props;\n    sizeSVG(this.svg, { margin, width, height, className });\n    this.dataSets = [];\n\n    data.counts.forEach((count) => {\n      count.data.forEach((value, genderIndex) => {\n        value.forEach((aValue, rowIndex) => {\n          if (!this.dataSets[rowIndex]) {\n            this.dataSets[rowIndex] = [];\n          }\n          this.dataSets[rowIndex].push({\n            side: genderIndex === 0 ? 'left' : 'right',\n            groupLabel: count.label,\n            colorRef: count.label,\n            label: data.bins[rowIndex],\n            value: visible[data.bins[rowIndex]] !== false && visible[count.label] !== false ? aValue : 0,\n          });\n        })\n\n      });\n    });\n    this.drawAxes();\n    // @TODO add back in,\n    // drawHorizontalGrid<any>({ x, y, gridX, gridY, props, ticks: maxValueCount(data.counts) });\n    this.updateChart(data.bins, this.dataSets);\n  }\n\n  /**\n   * Any necessary clean up\n   */\n  destroy() {\n    this.svg?.selectAll('svg > *').remove();\n  }\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  EGroupedBarLayout,\n  IGrid,\n  IGroupDataItem,\n  IHistogramBar,\n} from '../Histogram';\nimport { IDomain } from '../utils/domain';\nimport { DeepPartial } from '../utils/types';\nimport { TornadoD3 } from './TornadoD3';\nimport {\n  IAxes,\n  IChartAdaptor,\n  IChartState,\n  IMargin,\n  IStroke,\n  TipContentFn,\n} from './types';\n\nexport interface ITornadoDataSet {\n  borderColors?: string[];\n  colors?: string[];\n  label: string;\n  data: [number[], number[]];\n}\n\nexport interface ITornadoData {\n  bins: string[];\n  counts: ITornadoDataSet[];\n  colorScheme?: string[];\n  title?: string;\n}\n\nexport interface ITornadoProps {\n  axis: IAxes;\n  bar: IHistogramBar;\n  center: boolean;\n  className: string;\n  data: ITornadoData;\n  delay: number;\n  duration: number;\n  colorScheme: string[];\n  domain: IDomain;\n  grid: IGrid;\n  height: number;\n  margin: IMargin;\n  groupLayout: EGroupedBarLayout;\n  onClick?: (bar: IGroupDataItem) => void;\n  showBinPercentages: boolean;\n  splitBins: [string, string];\n  stroke: IStroke;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * Tornado component\n */\nclass Tornado extends Component<DeepPartial<ITornadoProps>, IChartState> {\n\n  private chart: IChartAdaptor<ITornadoProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<ITornadoProps>) {\n    super(props);\n    this.chart = new TornadoD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.chart.update(this.getChartState()));\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<ITornadoProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    this.chart.destroy();\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"tornado-chart-container\"></div>);\n  }\n}\n\nexport default Tornado;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","export default ['#4bbcad',\n  '#d54539',\n  '#5ab94d',\n  '#8a5cd3',\n  '#a4b243',\n  '#ba5ccd',\n  '#54995c',\n  '#cf47a1',\n  '#d29f3e',\n  '#5c6fda',\n  '#c36528',\n  '#5fa6dc',\n  '#d74770',\n  '#7d7430',\n  '#8a529e',\n  '#df9273',\n  '#5f74b8',\n  '#ac5450',\n  '#d192d7',\n  '#b26088'];\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","import { scaleOrdinal } from 'd3-scale';\nimport React, { FC } from 'react';\n\nimport colorScheme from './colors';\nimport { IBarChartDataSet } from './Histogram';\n\ninterface IProps {\n  className?: string;\n  theme?: string[];\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  onSelect: (label: string) => void;\n  visible: { [key: string]: boolean };\n}\n\nconst legendIconStyle = {\n  cursor: 'pointer',\n  display: 'inline-block',\n  height: '1rem',\n  margin: '0.25rem 0.5rem',\n  width: '1rem',\n};\n\nconst listStyle = {\n  listStyle: 'none',\n  padding: 0,\n  margin: 0,\n};\n\nconst liStyle = {\n  display: 'flex',\n  alignItems: 'center',\n}\n\nconst Legend: FC<IProps> = ({\n  className,\n  theme = colorScheme,\n  data,\n  onSelect,\n  visible,\n}) => {\n  const scheme: any = scaleOrdinal(theme);\n  const labels = data.bins;\n  return (\n    <div className={className}>\n      <ul style={listStyle}>\n        {\n          labels.map((label) => {\n            const active = (visible.hasOwnProperty(label) && visible[label]) || !visible.hasOwnProperty(label);\n            return (\n              <li key={label}\n                style={liStyle}>\n                <div style={{\n                  ...legendIconStyle,\n                  backgroundColor: active ? scheme(label) : '#FFF',\n                  border: '2px solid ' + scheme(label),\n                }}\n                  onClick={() => onSelect(label)}>\n                </div>\n                <div>\n                  {label}\n                </div>\n              </li>\n            );\n          })\n        }\n      </ul>\n    </div>\n  );\n};\n\nexport default Legend;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n"],"sourceRoot":""}