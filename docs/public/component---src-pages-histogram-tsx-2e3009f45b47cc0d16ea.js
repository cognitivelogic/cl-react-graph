(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{269:function(t,e,a){"use strict";a.r(e);a(300),a(128),a(55);var i=a(0),r=a.n(i),n=a(528),s=a.n(n),o=a(286),c=(a(363),a(532)),l=(a(330),a(83)),d=a.n(l),h=a(10),u=a.n(h),p=a(273),f=a(54),g=(a(331),a(294)),m=a(283),v=a(278),y=a(271),b=a(302),x=a(277),k=a(301),w=["#4bbcad","#d54539","#5ab94d","#8a5cd3","#a4b243","#ba5ccd","#54995c","#cf47a1","#d29f3e","#5c6fda","#c36528","#5fa6dc","#d74770","#7d7430","#8a529e","#df9273","#5f74b8","#ac5450","#d192d7","#b26088"],O=(a(84),a(539),function(t,e){return Object.keys(e).forEach(function(a){t.attr(a,e[a])}),t}),S=function(t,e,a,i,r,n){var s=r.height,o=r.width,c=r.axis,l=r.grid,d=r.margin,h=c.y.style["stroke-width"],u=E(c)+h,p=C(r);l.x.visible&&(a.attr("transform","translate("+u+", "+p+")"),a.call(function(t,e){return void 0===e&&(e=5),Object(m.a)(t).ticks(e)}(t,k(l,"x.ticks",n)).tickSize(-s+j(r.axis)+2*d.top).tickFormat(function(){return""})),O(a.selectAll(".tick line"),l.x.style),O(a.selectAll(".domain"),{stroke:"transparent"})),l.y.visible&&(i.attr("transform","translate("+(E(c)+h)+", 0)").transition().call(function(t,e){return void 0===e&&(e=5),Object(m.b)(t).ticks(e)}(e,k(l,"y.ticks",n)).tickSize(-o+2*d.left+E(c)).tickFormat(function(){return""})),O(i.selectAll(".tick line"),l.y.style),i.selectAll(".gridY .tick line").filter(function(t,e){return 0===e}).attr("display","none"),O(i.selectAll(".domain"),{stroke:"transparent"}))},C=function(t){var e=t.height,a=t.margin,i=t.axis;return e-2*a.top-j(i)},E=function(t){return""===t.y.label?t.y.width:t.y.width+30},j=function(t){return""===t.x.label?t.x.height:t.x.height+30+k(t,"x.margin",0)},A=function(t){var e=t.axis;return t.width-2*t.margin.left-E(e)},M={fx:{in:function(t){t.style("left",y.a.pageX+"px").style("top",y.a.pageY-55+"px"),t.transition().duration(200).style("opacity",.9)},move:function(t){t.style("left",y.a.pageX+"px").style("top",y.a.pageY-55+"px")},out:function(t){t.transition().duration(100).style("opacity",0)}}},D=function(t,e){return e&&e.remove(),(e=Object(y.d)(t).append("div").attr("class","tooltip top").style("opacity",0)).append("div").attr("class","tooltip-arrow"),{tipContainer:e,tipContent:e.append("div").attr("class","tooltip-inner")}},N=function(){var t,e,a,i=Object(v.b)(),r=Object(v.a)(),n=Object(v.a)(),s={axis:{x:{height:20,label:"",margin:10,style:{fill:"none","shape-rendering":"crispEdges",stroke:"#666","stroke-opacity":1,"stroke-width":1},text:{style:{fill:"#666"}}},y:{label:"",style:{fill:"none","shape-rendering":"crispEdges",stroke:"#666","stroke-opacity":1,"stroke-width":1},text:{style:{fill:"#666"}},ticks:10,width:25}},bar:{groupMargin:.1,margin:0,width:50},className:"histogram-d3",colorScheme:w,data:{bins:[],counts:[]},delay:0,domain:{max:null,min:null},duration:400,grid:{x:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0},y:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0}},height:200,margin:{left:5,top:5},stroke:{color:"#005870",dasharray:"",linecap:"butt",width:0},tip:M,tipContainer:"body",tipContentFn:function(t,e,a){return t[e]+"<br />"+a},visible:{},width:200};return{create:function(e,a){void 0===a&&(a={}),this.mergeProps(a),this._makeSvg(e),this.makeGrid(),this.makeScales(),this.container=t.append("g").attr("class","histogram-container"),this.update(e,a)},mergeProps:function(t){this.props=x(s,t),this.props.data=t.data,t.colorScheme&&(this.props.colorScheme=t.colorScheme)},_makeSvg:function(i){if(t){t.selectAll("svg > *").remove(),t.remove();var r=i.getElementsByTagName("svg");r.length>0&&i.removeChild(r[0])}var n=this.props,s=n.margin,o=n.width,c=n.height,l=n.className,d=1-s.left/o,h=1-s.top/c;t=Object(y.d)(i).append("svg").attr("class",l).attr("width",o).attr("height",c).attr("viewBox","0 0 "+o+" "+c).append("g").attr("transform","translate("+s.left+","+s.top+") scale("+d+","+h+")");var u=D(this.props.tipContainer,e);a=u.tipContent,e=u.tipContainer},valuesCount:function(t){return t.reduce(function(t,e){return e.data.length>t?e.data.length:t},0)},appendDomainRange:function(t,e){var a=[],i=this.props,r=i.domain,n=i.margin,s=i.height,o=e.reduce(function(t,e){return[].concat(t,e.map(function(t){return t.value}))},[0]),c=Object(g.a)(o,function(t){return t});a[1]=r&&r.hasOwnProperty("max")&&null!==r.max?r.max:c[1],a[0]=r&&r.hasOwnProperty("min")&&null!==r.min?r.min:c[0];var l=[s-2*n.top-j(this.props.axis),0];t.range(l).domain(a)},makeScales:function(){this.xAxis=t.append("g").attr("class","x-axis"),this.yAxis=t.append("g").attr("class","y-axis"),this.xAxisLabel=t.append("g"),this.yAxisLabel=t.append("g")},_drawScales:function(e){var a=this.props,s=a.axis,o=a.margin,c=a.height,l=this.valuesCount(e.counts),d=A(this.props),h=e.counts.map(function(t){return t.label});r.domain(e.bins).rangeRound([0,d]).paddingInner(this.groupedMargin()),n.domain(h).rangeRound([0,r.bandwidth()]).paddingInner(this.barMargin());var u=Object(m.a)(r),p=k(s,"x.tickSize",void 0);void 0!==p?u.tickSize(p):d/l<10&&u.tickValues(r.domain().filter(function(t,e){return!(e%10)})),"TIME"===s.x.scale&&s.x.dateFormat&&u.tickFormat(Object(b.a)(s.x.dateFormat)),this.xAxis.attr("transform","translate("+(E(s)+s.y.style["stroke-width"])+","+(c-j(this.props.axis)-2*o.left)+")").call(u),this.appendDomainRange(i,this.dataSets);var f=Object(m.b)(i).ticks(s.y.ticks),g=k(s,"y.tickSize",void 0);void 0!==g&&f.tickSize(g),"TIME"===s.y.scale&&s.y.dateFormat&&f.tickFormat(Object(b.a)(s.y.dateFormat)),this.yAxis.attr("transform","translate("+E(s)+", 0)").transition().call(f),O(t.selectAll(".y-axis .domain, .y-axis .tick line"),s.y.style),O(t.selectAll(".y-axis .tick text"),s.y.text.style),O(t.selectAll(".x-axis .domain, .x-axis .tick line"),s.x.style),O(t.selectAll(".x-axis .tick text"),s.x.text.style)},groupedMargin:function(){var t=k(this.props.bar,"groupMargin",.1);return t>=0&&t<=1?t:.1},barMargin:function(){var t=k(this.props.bar,"margin",0);return t>=0&&t<=1?t:.1},barWidth:function(){return n.bandwidth()},updateChart:function(t,s){var o=this,c=this.props,l=c.axis,d=c.height,h=c.width,u=c.margin,p=c.delay,f=c.duration,g=c.tip,m=this.barWidth(),y=Object(v.d)(this.props.colorScheme),b=C(this.props),x=this.container.selectAll("g").data(s),k=x.enter().append("g").merge(x).attr("transform",function(t){return"translate("+(E(l)+l.y.style["stroke-width"]+r(t[0].label))+", 0)"}).selectAll("rect").data(function(t){return t});k.enter().append("rect").attr("height",0).attr("y",function(e,a){var i=t.findIndex(function(t){return t===e.label});s[i];return b-0}).attr("class","bar").on("mouseover",function(i,r){var n=t.findIndex(function(t){return t===i.label});a.html(function(){return o.props.tipContentFn(t,n,i.value)}),g.fx.in(e)}).on("mousemove",function(){return g.fx.move(e)}).on("mouseout",function(){return g.fx.out(e)}).merge(k).attr("x",function(t){return n(t.groupLabel)}).attr("width",function(t){return m}).attr("fill",function(t,e){return y(e)}).transition().duration(f).delay(p).attr("y",function(t,e){return i(t.value+0)}).attr("stroke-dasharray",function(t){var e=b-i(t.value);return m+" 0 "+e+" "+m}).attr("height",function(t){return b-i(t.value)}),k.exit().remove(),x.exit().remove();var w=this.xAxisLabel.selectAll("text").data([l.x.label]);w.enter().append("text").attr("class","x-axis-label").merge(w).attr("transform","translate("+h/2+" ,"+(d-j(this.props.axis)-2*u.left+l.x.margin)+")").style("text-anchor","middle").text(function(t){return t});var O=this.yAxisLabel.selectAll("text").data([l.y.label]);O.enter().append("text").attr("class","y-axis-label").merge(O).attr("transform","rotate(-90)").attr("y",0).attr("x",0-(b/2-2*u.top)).attr("dy","1em").style("text-anchor","middle").text(function(t){return t})},makeGrid:function(){this.gridX=t.append("g").attr("class","grid gridX"),this.gridY=t.append("g").attr("class","grid gridY")},update:function(t,e){var a=this;if(e.data&&(this.mergeProps(e),this.props.data.bins)){var n=this.props,s=n.data,o=n.visible;this.dataSets=[],s.counts.forEach(function(t){t.data.forEach(function(e,i){a.dataSets[i]||(a.dataSets[i]=[]),a.dataSets[i].push({groupLabel:t.label,label:s.bins[i],value:!1!==o[s.bins[i]]&&!1!==o[t.label]?e:0})})}),this._drawScales(this.props.data),S(r,i,this.gridX,this.gridY,this.props,this.valuesCount(s.counts)),this.updateChart(s.bins,this.dataSets)}},destroy:function(e){t.selectAll("svg > *").remove()}}},W=function(t){function e(e){var a;return(a=t.call(this,e)||this).chart=N(),a.state={parentWidth:300},a}u()(e,t);var a=e.prototype;return a.handleResize=function(){var t=this,e=this.getDOMNode(),a=this.ref&&this.ref.offsetWidth?this.ref.offsetWidth:0;this.setState({parentWidth:a},function(){return t.chart.create(e,t.getChartState())})},a.componentDidMount=function(){var t=this;this.chart.create(this.getDOMNode(),this.getChartState()),"100%"===this.props.width&&(window.addEventListener("resize",function(e){return t.handleResize()}),this.handleResize())},a.componentDidUpdate=function(){this.chart.update(this.getDOMNode(),this.getChartState())},a.getChartState=function(){var t=this.props.width,e=this.props,a=(e.children,d()(e,["children"]));return"100%"===t&&(t=this.state.parentWidth||300),Object.assign({},a,{width:t})},a.componentWillUnmount=function(){"100%"===this.props.width&&window.removeEventListener("resize",this.handleResize),this.chart.destroy(this.getDOMNode())},a.getDOMNode=function(){return f.findDOMNode(this.ref)},a.render=function(){var t=this;return i.createElement("div",{ref:function(e){return t.ref=e},className:"histogram-chart-container"})},e}(i.Component);W.defaultProps={axis:{},bar:{margin:0,width:10},grid:{x:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0},y:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0}},height:200,margin:{left:5,top:5},stroke:{color:function(t,e,a){return Object(p.f)(a(e)).darker(1).toString()},width:1},tipContentFn:function(t,e,a){return t[e]+"<br />"+a.toFixed(2)},width:"100%"};var F=W,R=function(){var t,e,a,i=Object(v.b)(),r=Object(v.a)();var n={axis:{x:{height:25,style:{fill:"none","shape-rendering":"crispEdges",stroke:"#666","stroke-opacity":1,"stroke-width":1},text:{style:{fill:"#666"}},ticks:10},y:{style:{fill:"none","shape-rendering":"crispEdges",stroke:"#666","stroke-opacity":1,"stroke-width":1},text:{style:{fill:"#666"}},width:20}},bar:{height:50,margin:10},className:"histogram-d3",colorScheme:w,data:[],delay:0,duration:400,grid:{x:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0},y:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0}},height:200,margin:{left:5,top:5},stroke:{color:"#005870",dasharray:"",linecap:"butt",width:0},tip:M,tipContainer:"body",tipContentFn:function(t,e,a){return t[e]+"<br />"+a},width:200};return{create:function(t,e){void 0===e&&(e={}),this.props=x(n,e),this.update(t,this.props)},_makeSvg:function(i){if(t){t.selectAll("svg > *").remove(),t.remove();var r=i.getElementsByTagName("svg");r.length>0&&i.removeChild(r[0])}var n=this.props,s=n.margin,o=n.width,c=n.height,l=n.className;t=Object(y.d)(i).append("svg").attr("class",l).attr("width",o).attr("height",c).attr("viewBox","0 0 "+o+" "+c).append("g").attr("transform","translate("+s.left+","+s.top+")");var d=D(this.props.tipContainer,e);a=d.tipContent,e=d.tipContainer},valuesCount:function(t){return t.reduce(function(t,e){return e.data.length>t?e.data.length:t},0)},_drawScales:function(e){var a=this.props,n=a.margin,s=a.width,o=a.height,c=a.axis,l=this.valuesCount(e.counts);t.selectAll(".y-axis").remove(),t.selectAll(".x-axis").remove();var d,h,u,p,f=this.gridHeight(),v=e.counts.reduce(function(t,e){return[].concat(t,e.data)},[]);r.domain(e.bins).rangeRound([0,f]),h=Object(m.a)(i).ticks(c.x.ticks),u=Object(m.b)(r).ticks(c.y.ticks),f/l<10&&h.tickValues(i.domain().filter(function(t,e){return!(e%10)})),(d=Object(g.a)(v,function(t){return t}))[0]=0,p=[0,s-2*n.top-c.y.width],i.range(p).domain(d),t.append("g").attr("class","y-axis").attr("transform","translate("+c.y.width+", 0)").call(u),t.append("g").attr("class","x-axis").attr("transform","translate("+c.y.width+","+(o-c.x.height-2*n.left)+")").call(h),O(t.selectAll(".y-axis .domain, .y-axis .tick line"),c.y.style),O(t.selectAll(".y-axis .tick text"),c.y.text.style),O(t.selectAll(".x-axis .domain, .x-axis .tick line"),c.x.style),O(t.selectAll(".x-axis .tick text"),c.x.text.style)},_drawBars:function(t){var e=this;this.valuesCount(t.counts);t.counts.forEach(function(a,i){e.drawDataSet(t.bins,a,i,t.counts.length)})},gridWidth:function(){var t=this.props,e=t.axis;return t.width-2*t.margin.left-e.y.width},gridHeight:function(){var t=this.props,e=t.height,a=t.margin,i=t.axis;return e-2*a.top-i.x.height},groupedMargin:function(){return 3*(this.props.data.counts.length-1)},barHeight:function(){var t=this.props,e=(t.axis,t.width,t.margin,t.data),a=t.bar,i=(t.stroke,this.gridHeight()),r=this.valuesCount(e.counts),n=e.counts.length,s=i/r-2*a.margin-this.groupedMargin();return s<5&&(a.margin=1,s=Math.max(1,(i-(r+1)*a.margin)/r)),s/n},drawDataSet:function(r,n,s,o){var c,l=this,d=this.props,h=(d.height,d.width,d.margin,d.bar),u=d.delay,p=d.duration,f=d.axis,g=d.stroke,m=d.tip,y=d.tipContentFn,b=this.barHeight(),x=Object(v.d)(n.colors||this.props.colorScheme),k=n.borderColors?Object(v.d)(n.borderColors):null,w=".bar-"+s;t.selectAll(w).remove(),(c=t.selectAll(w).data(n.data).enter().append("rect").attr("class","bar "+w).attr("y",function(t,e,a){return h.margin+(b+2*h.margin)*e+function(t){return 1===o?0:(t+s)*(b+l.groupedMargin())}(e)}).attr("height",function(t){return b}).attr("fill",function(t,e){return x(e)}).on("mouseover",function(t,i){a.html(function(){return y(r,i,t)}),m.fx.in(e)}).on("mousemove",function(){return m.fx.move(e)}).on("mouseout",function(){return m.fx.out(e)}).attr("x",function(t){return f.y.width+f.y.style["stroke-width"]}).attr("width",0)).attr("stroke",function(t,e){return k?k(e):"function"==typeof g.color?g.color(t,e,x):g.color}).attr("shape-rendering","crispEdges").attr("stroke-width",g.width).attr("stroke-linecap",g.linecap),""!==g.dasharray&&c.attr("stroke-dasharray",g.dasharray),c.transition().duration(p).delay(u).attr("stroke-dasharray",function(t){var e=i(t);return e+b+e+" "+b}).attr("width",function(t){return i(t)}),c.exit().remove()},_drawGrid:function(e){var a,n,s=e.data,o=e.height,c=e.width,l=e.axis,d=e.grid,h=e.margin,u=this.valuesCount(s.counts),p=l.y.style["stroke-width"],f=l.y.width+this.groupedMargin()/2,g=0;d.x.visible&&((a=t.append("g").attr("class","grid gridX").attr("transform","translate("+f+", "+g+")")).call(function(t){return void 0===t&&(t=5),Object(m.b)(r).ticks(t)}(d.x.ticks||u).tickSize(-c+2*h.left+l.y.width).tickFormat(function(){return""})),O(a.selectAll(".tick line"),d.x.style),O(a.selectAll(".domain"),{stroke:"transparent"})),d.y.visible&&(n=t.append("g").attr("class","grid gridY").attr("transform","translate("+(l.y.width+p)+", "+(o-l.x.height-2*h.top)+")").call(function(t){return void 0===t&&(t=5),Object(m.a)(i).ticks(t)}(d.y.ticks||u).tickSize(-o+2*h.left+l.x.height).tickFormat(function(){return""})),O(n.selectAll(".tick line"),d.y.style),O(n.selectAll(".domain"),{stroke:"transparent"}))},update:function(t,e){e.data&&(this.props=x(n,e),this._makeSvg(t),this.props.data.bins&&(this._drawScales(this.props.data),this._drawGrid(this.props),this._drawBars(this.props.data)))},destroy:function(e){t.selectAll("svg > *").remove()}}},z=function(t){function e(e){var a;return(a=t.call(this,e)||this).histogram=R(),a.state={parentWidth:300},a}u()(e,t);var a=e.prototype;return a.handleResize=function(){var t=this,e=this.getDOMNode(),a=this.ref&&this.ref.offsetWidth?this.ref.offsetWidth:0;this.setState({parentWidth:a},function(){return t.histogram.create(e,t.getChartState())})},a.componentDidMount=function(){var t=this;this.histogram.create(this.getDOMNode(),this.getChartState()),"100%"===this.props.width&&(window.addEventListener("resize",function(e){return t.handleResize()}),this.handleResize())},a.componentDidUpdate=function(){this.histogram.update(this.getDOMNode(),this.getChartState())},a.getChartState=function(){var t=this.props.width,e=this.props,a=(e.children,d()(e,["children"]));return"100%"===t&&(t=this.state.parentWidth||300),Object.assign({},a,{width:t})},a.componentWillReceiveProps=function(t){this.histogram.update(this.getDOMNode(),this.getChartState())},a.componentWillUnmount=function(){"100%"===this.props.width&&window.removeEventListener("resize",this.handleResize),this.histogram.destroy(this.getDOMNode())},a.getDOMNode=function(){return f.findDOMNode(this.ref)},a.render=function(){var t=this;return i.createElement("div",{ref:function(e){return t.ref=e},className:"histogram-chart-container"})},e}(i.Component);z.defaultProps={axis:{},bar:{margin:2,width:10},grid:{x:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0},y:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0}},height:200,margin:{left:5,top:5},stroke:{color:function(t,e,a){return Object(p.f)(a(e)).darker(1)},width:1},tipContentFn:function(t,e,a){return t[e]+"<br />"+a.toFixed(2)},width:"100%"};var _=z,L=(a(541),a(153),a(544),function(){var t,e,a,i,r,n=Object(v.a)(),s=Object(v.b)(),o=Object(v.a)(),c=Object(v.a)();var l={axis:{x:{height:20,label:"",margin:10,style:{fill:"none","shape-rendering":"crispEdges",stroke:"#666","stroke-opacity":1,"stroke-width":1},text:{style:{fill:"#666"}}},y:{label:"",style:{fill:"none","shape-rendering":"crispEdges",stroke:"#666","stroke-opacity":1,"stroke-width":1},text:{style:{fill:"#666"}},ticks:10,width:25}},bar:{groupMargin:0,margin:0,width:50},className:"histogram-d3",colorScheme:w,data:[{bins:[],counts:[]}],delay:0,domain:{max:null,min:null},duration:400,grid:{x:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0},y:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0}},height:200,margin:{left:5,top:5},stroke:{color:"#005870",dasharray:"",linecap:"butt",width:0},tip:M,tipContainer:"body",tipContentFn:function(t,e,a,i){return i+": "+t[e]+"<br />"+a},visible:{},width:200};return{create:function(e,a){void 0===a&&(a={}),this.mergeProps(a),this._makeSvg(e),this.makeGrid(i),this.makeScales(),this.containers=i.data.map(function(e,a){return t.append("g").attr("class","histogram-container-"+a)}),this.update(e,i)},mergeProps:function(t){(i=x(l,t)).data=t.data,t.colorScheme&&(i.colorScheme=t.colorScheme)},_makeSvg:function(r){if(t){t.selectAll("svg > *").remove(),t.remove();var n=r.getElementsByTagName("svg");n.length>0&&r.removeChild(n[0])}var s=i,o=s.margin,c=s.width,l=s.height,d=s.className;t=Object(y.d)(r).append("svg").attr("class",d).attr("width",c).attr("height",l).attr("viewBox","0 0 "+c+" "+l).append("g").attr("transform","translate("+o.left+","+o.top+")");var h=D(i.tipContainer,e);a=h.tipContent,e=h.tipContainer},valuesCount:function(t){return t.reduce(function(t,e){return e.data.length>t?e.data.length:t},0)},appendDomainRange:function(t,e){var a=[],r=i.domain,s=e.reduce(function(t,e){var a=e.reduce(function(t,e){return[].concat(t,e.map(function(t){return t.value}))},[]);return[].concat(t,a)},[0]),o=Object(g.a)(s,function(t){return t});a[1]=r&&r.hasOwnProperty("max")&&null!==r.max?r.max:o[1],a[0]=r&&r.hasOwnProperty("min")&&null!==r.min?r.min:o[0];var c=[n.bandwidth(),0];t.range(c).domain(a)},yAxisWidth:function(){var t=i.axis;return""===t.y.label?t.y.width:t.y.width+30},xAxisHeight:function(){var t=i.axis;return""===t.x.label?t.x.height:t.x.height+30},makeScales:function(){var e=i,a=e.axis,r=e.margin,n=e.height,s=e.width;this.xAxis=t.append("g").attr("class","x-axis"),this.yAxis=t.append("g").attr("class","y-axis"),""!==a.x.label&&t.append("text").attr("class","x-axis-label").attr("transform","translate("+Number(s)/2+" ,"+(n-this.xAxisHeight()-2*r.left+10+a.x.margin)+")").style("text-anchor","middle").text(a.x.label),""!==a.y.label&&t.append("text").attr("class","y-axis-label").attr("transform","translate(0, -"+this.gridHeight()+")rotate(-90)").attr("y",0-r.left).attr("x",0-(n/2-2*r.top)).attr("dy","1em").style("text-anchor","middle").text(a.y.label)},getBins:function(){return i.data.reduce(function(t,e){return Array.from(new Set(t.concat(e.bins)))},[])},_drawScales:function(e){var a,l=this,d=i,h=(d.bar,d.domain,d.margin),u=(d.width,d.height),p=d.axis,f=e.reduce(function(t,e){var a=l.valuesCount(e.counts);return a>t?a:t},0),g=this.gridWidth(),v=e[0].counts.map(function(t){return t.label}),y=this.getBins();o.domain(y).rangeRound([0,g]).paddingInner(this.groupedMargin()),c.domain(v).rangeRound([0,o.bandwidth()]).paddingInner(this.barMargin()),a=Object(m.a)(o);var b=k(p,"x.tickSize",void 0);void 0!==b?a.tickSize(b):g/f<10&&a.tickValues(o.domain().filter(function(t,e){return!(e%10)})),this.xAxis.attr("transform","translate("+(this.yAxisWidth()+p.y.style["stroke-width"])+","+(u-this.xAxisHeight()-2*h.left)+")").call(a);var x=e.map(function(t){return t.title}),w=[u-2*h.top-this.xAxisHeight(),0];n.domain(x).rangeRound(w),this.appendDomainRange(s,r);var S=Object(m.b)(n).ticks(p.y.ticks),C=k(p,"y.tickSize",void 0);void 0!==C&&S.tickSize(C),this.yAxis.attr("transform","translate("+this.yAxisWidth()+", 0)").transition().call(S);Object.assign({},p.x.text.style),Object.assign({},p.y.text.style);O(t.selectAll(".y-axis .domain, .y-axis .tick line"),p.y.style),O(t.selectAll(".y-axis .tick text"),p.y.text.style),O(t.selectAll(".x-axis .domain, .x-axis .tick line"),p.x.style),O(t.selectAll(".x-axis .tick text"),p.x.text.style)},gridWidth:function(){var t=i,e=(t.axis,t.width),a=t.margin;return Number(e)-2*a.left-this.yAxisWidth()},gridHeight:function(){var t=i,e=t.height,a=t.margin;t.axis;return e-2*a.top-this.xAxisHeight()},groupedMargin:function(){var t=k(i.bar,"groupMargin",.1);return t>=0&&t<=1?t:0},barMargin:function(){var t=k(i.bar,"margin",0);return t>=0&&t<=1?t:.1},barWidth:function(){return c.bandwidth()},updateChart:function(t){var r=this,l=this.getBins(),d=i,h=(d.height,d.width,d.margin,d.bar,d.delay),u=d.duration,p=d.axis,f=d.stroke,g=d.tip,m=d.tipContentFn,y=this.barWidth(),b=Object(v.d)(i.colorScheme),x=Object(v.d)(["#FFF"]),k=this.yAxisWidth();this.groupedMargin(),t.reduce(function(t,e){var a=e.reduce(function(t,e){return e.length>t?e.length:t},0);return a>t?a:t},0);t.forEach(function(t,d){var v=i.data[d].title,w=r.containers[d].selectAll("g").data(t),O=w.enter().append("g").merge(w).attr("transform",function(t){return"translate("+(k+p.y.style["stroke-width"]+o(t[0].label))+", "+n(t[0].joyLabel)+")"}).selectAll("rect").data(function(t){return t});O.enter().append("rect").attr("height",0).attr("y",function(t){return n.bandwidth()}).attr("class","bar").attr("x",function(t){return c(t.groupLabel)}).attr("width",function(t){return y}).attr("fill",function(t,e){return b(e)}).on("mouseover",function(t){var i=l.findIndex(function(e){return e===t.label});a.html(function(){return m(l,i,t.value,v)}),g.fx.in(e)}).on("mousemove",function(){return g.fx.move(e)}).on("mouseout",function(){return g.fx.out(e)}).merge(O).transition().duration(u).delay(h).attr("y",function(t){return s(t.value)}).attr("stroke",function(t,e){if(x)return x(e)}).attr("shape-rendering","crispEdges").attr("stroke-width",f.width).attr("stroke-linecap",f.linecap).attr("stroke-dasharray",function(t){var e=n.bandwidth()-s(t.value);return y+" 0 "+e+" "+y}).attr("height",function(t){return n.bandwidth()-s(t.value)}),w.exit().remove()})},makeGrid:function(e){e.grid;this.gridX=t.append("g").attr("class","grid gridX"),this.gridY=t.append("g").attr("class","grid gridY")},_drawGrid:function(){var t=this,e=i,a=e.data,r=e.height,s=e.width,c=e.axis,l=e.grid,d=e.margin,h=(e.bar,a.reduce(function(e,a){var i=t.valuesCount(a.counts);return i>e?e:i},0)),u=c.y.style["stroke-width"],p=this.yAxisWidth()+u,f=this.gridHeight();l.x.visible&&(this.gridX.attr("transform","translate("+p+", "+f+")"),this.gridX.call(function(t){return void 0===t&&(t=5),Object(m.a)(o).ticks(t)}(k(l,"x.ticks",h)).tickSize(-r+this.xAxisHeight()+2*d.top).tickFormat(function(){return""})),O(this.gridX.selectAll(".tick line"),l.x.style),O(this.gridX.selectAll(".domain"),{stroke:"transparent"})),l.y.visible&&(this.gridY.attr("transform","translate("+(this.yAxisWidth()+u)+", 0)").transition().call(function(t){return void 0===t&&(t=5),Object(m.b)(n).ticks(t)}(k(l,"y.ticks",h)).tickSize(-s+2*d.left+this.yAxisWidth()).tickFormat(function(){return""})),O(this.gridY.selectAll(".tick line"),l.y.style),this.gridY.selectAll(".gridY .tick line").filter(function(t,e){return 0===e}).attr("display","none"),O(this.gridY.selectAll(".domain"),{stroke:"transparent"}))},update:function(t,e){if(i.data){this.mergeProps(e);var a=i,n=a.data,s=a.visible;r=n.map(function(t){var e=[];return t.counts.forEach(function(a){a.data.forEach(function(i,r){e[r]||(e[r]=[]),e[r].push({groupLabel:a.label,joyLabel:t.title,label:t.bins[r],value:!1!==s[t.bins[r]]&&!1!==s[a.label]?i:0})})}),e}),this._drawScales(i.data),this._drawGrid(),this.updateChart(r)}},destroy:function(e){t.selectAll("svg > *").remove()}}}),T=function(t){function e(e){var a;return(a=t.call(this,e)||this).chart=L(),a.state={parentWidth:300},a}u()(e,t);var a=e.prototype;return a.handleResize=function(){var t=this,e=this.getDOMNode(),a=this.ref&&this.ref.offsetWidth?this.ref.offsetWidth:0;this.setState({parentWidth:a},function(){return t.chart.create(e,t.getChartState())})},a.componentDidMount=function(){var t=this;this.chart.create(this.getDOMNode(),this.getChartState()),"100%"===this.props.width&&(window.addEventListener("resize",function(e){return t.handleResize()}),this.handleResize())},a.componentDidUpdate=function(){this.chart.update(this.getDOMNode(),this.getChartState())},a.getChartState=function(){var t=this.props.width,e=this.props,a=(e.children,d()(e,["children"]));return"100%"===t&&(t=this.state.parentWidth||300),Object.assign({},a,{width:t})},a.componentWillUnmount=function(){"100%"===this.props.width&&window.removeEventListener("resize",this.handleResize),this.chart.destroy(this.getDOMNode())},a.getDOMNode=function(){return f.findDOMNode(this.ref)},a.render=function(){var t=this;return i.createElement("div",{ref:function(e){return t.ref=e},className:"histogram-chart-container"})},e}(i.Component);T.defaultProps={axis:{},bar:{margin:0,width:10},grid:{x:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0},y:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0}},height:200,margin:{left:5,top:5},stroke:{color:function(t,e,a){return Object(p.f)(a(e)).darker(1).toString()},width:1},width:"100%"};var P={cursor:"pointer",display:"inline-block",height:"1rem",margin:"0.25rem 0.5rem",width:"1rem"},H={listStyle:"none"},B=function(t){var e=t.className,a=t.theme,r=void 0===a?w:a,n=t.data,s=t.onSelect,o=t.visible,c=Object(v.d)(r),l=n.bins;return i.createElement("div",{className:e},i.createElement("ul",{style:H},l.map(function(t){var e=o.hasOwnProperty(t)&&o[t]||!o.hasOwnProperty(t);return i.createElement("li",{key:t},i.createElement("div",{style:Object.assign({},P,{backgroundColor:e?c(t):"#FFF",border:"2px solid "+c(t)}),onClick:function(){return s(t)}})," ",t)})))},I=(a(546),a(369)),G=a(333),Y=a(368),X=function(t){var e,a;switch(t.x.scale){case"LOG":e=Object(v.c)().clamp(!0);break;case"TIME":e=Object(v.e)();break;default:e=Object(v.b)()}switch(t.y.scale){case"LOG":a=Object(v.c)().clamp(!0);break;case"TIME":e=Object(v.e)();break;default:a=Object(v.b)()}return[e,a]},U=function(){var t,e,a,i,r,n={curveType:Y.c,fill:!1,show:!0,stroke:"#005870",strokeDashArray:"5 5",strokeDashOffset:0},s={fill:"rgba(255, 255, 255, 0)",radius:4,show:!0,stroke:"#005870"},o={axis:{x:{height:20,scale:"LINEAR",style:{fill:"none","shape-rendering":"crispEdges",stroke:"#666","stroke-opacity":1,"stroke-width":1},text:{style:{fill:"#666"}}},y:{scale:"LINEAR",style:{fill:"none","shape-rendering":"crispEdges",stroke:"#666","stroke-opacity":1,"stroke-width":1},text:{style:{fill:"#666"}},ticks:10,width:25}},className:"line-chart-d3",fx:I.a,grid:{x:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0},y:{style:{fill:"none",stroke:"#bbb","stroke-opacity":.7,"stroke-width":1},ticks:5,visible:!0}},height:250,line:n,margin:{left:5,top:5},point:s,tip:M,tipContainer:"body",tipContentFn:function(t,e,a){switch(typeof t[e].x){case"object":return i(t[e].x)+", "+t[e].y;default:return Number(t[e].x).toFixed(3)+", "+t[e].y}},width:200},c={line:n,point:s};return{create:function(e,a){void 0===a&&(a={}),this.props=x(o,a),this._makeSvg(e),this.makeScales();var i=X(this.props.axis);this.x=i[0],this.y=i[1],this.makeGrid(),this.container=t.append("g").attr("class","linechart-container"),this.lineContainer=this.container.append("g").attr("class","line-container"),this._createLines(this.props.data),this.update(e,this.props)},_makeSvg:function(a){if(t){t.selectAll("svg > *").remove(),t.remove();var i=a.getElementsByTagName("svg");i.length>0&&a.removeChild(i[0])}var n=this.props,s=n.margin,o=n.width,c=n.height,l=n.className,d=1-s.left/o,h=1-s.top/c;t=Object(y.d)(a).append("svg").attr("class",l).attr("width",o).attr("height",c).append("g").attr("transform","translate("+s.left+","+s.top+") scale("+d+","+h+")");var u=D(this.props.tipContainer,e);r=u.tipContent,e=u.tipContainer},_drawDataPointSet:function(t){var a=this,i=this.props,n=i.axis,s=i.tip,o=E(n),c=this.container.selectAll("g").data(t),l=c.enter().append("g").attr("class",function(t,e){return"point-container"+e}).merge(c).selectAll("circle").data(function(t){return t.data.map(function(e){return Object.assign({},e,{point:t.point})})});l.attr("class","update"),l.enter().append("circle").attr("class","enter").on("mouseover",function(t,i){r.html(function(){return a.props.tipContentFn([t],0)}),s.fx.in(e)}).on("mousemove",function(){return s.fx.move(e)}).on("mouseout",function(){return s.fx.out(e)}).merge(l).attr("class","point").attr("cy",function(t){return a.y(t.y)}).attr("r",function(t,e){return 0}).attr("fill",function(t){return t.point.fill}).attr("stroke",function(t){return t.point.stroke}).attr("cx",function(t){return a.x(t.x)+o}).transition().duration(400).attr("r",function(t){return t.point.show?t.point.radius:0}).delay(650),c.exit().remove(),l.exit().remove()},makeScales:function(){this.xAxis=t.append("g").attr("class","x-axis"),this.yAxis=t.append("g").attr("class","y-axis"),this.xAxisLabel=t.append("g"),this.yAxisLabel=t.append("g")},_drawScales:function(e){var a,i,r=this.props,n=r.axis,s=r.height,o=A(this.props),c=[],l=[],d=Object(m.b)(this.y);n.y.tickValues?d.tickValues(n.y.tickValues):d.ticks(n.y.ticks),n.y.numberFormat&&d.tickFormat(Object(G.a)(n.y.numberFormat));var h=Object(m.a)(this.x);n.x.tickValues&&h.tickValues(n.x.tickValues),"TIME"===n.x.scale&&n.x.dateFormat&&h.tickFormat(Object(b.a)(n.x.dateFormat));var u=j(n),p=E(n);e.forEach(function(t){t.data.forEach(function(t){var e=t.y,a=t.x;"LOG"===n.y.scale&&0===t.y&&(e=1e-6),"LOG"===n.x.scale&&0===t.x&&(a=1e-6),c.push(e),l.push(a)})}),a=Object(g.a)(c),i=Object(g.a)(l),"LOG"===n.y.scale&&1e-6===a[0]&&(a[0]=1),"LOG"===n.x.scale&&1e-6===i[0]&&(i[0]=1),this.x.domain(i).rangeRound([0,o]),this.y.domain(a).range([s-u,0]),this.yAxis.attr("transform","translate("+p+", 0)").transition().call(d),this.xAxis.attr("transform","translate("+p+","+(s-u)+")").call(h),O(t.selectAll(".y-axis .domain, .y-axis .tick line"),n.y.style),O(t.selectAll(".y-axis .tick text"),n.y.text.style),O(t.selectAll(".x-axis .domain, .x-axis .tick line"),n.x.style),O(t.selectAll(".x-axis .tick text"),n.x.text.style)},_createLines:function(t){var e=this;t.forEach(function(t,a){e.lineContainer.append("path").attr("class","line-"+a)}),t.forEach(function(t,a){e.lineContainer.append("path").attr("class","fill-"+a)})},_drawLines:function(t){var e=this,a=this.props.axis,i=E(a);t.forEach(function(t,a){e.lineContainer.select(".line-"+a).attr("fill","none").attr("stroke-dashoffset",t.line.strokeDashOffset).attr("stroke-dasharray",t.line.strokeDashOffset).attr("stroke",t.line.stroke).transition().duration(500).attr("d",function(t,e,a,i){return Object(Y.d)().curve(t).x(function(t){return a(t.x)+e}).y(function(t){return i(t.y)})}(t.line.curveType,i,e.x,e.y)(t.data)).delay(50)})},drawAreas:function(t){var e=this,a=this.props,i=a.axis,r=a.height,n=E(i),s=j(i);t.forEach(function(t,a){var i;e.lineContainer.select(".fill-"+a).attr("fill",t.line.fill.fill).style("opacity",t.line.show&&t.line.fill.show?1:0).transition().duration(500).delay(50).attr("d",(i=t.line.curveType,Object(Y.b)().curve(i).x(function(t){return e.x(t.x)+n}).y0(function(t){return r-s}).y1(function(t){return e.y(t.y)}))(t.data))})},valuesCount:function(t){return t.reduce(function(t,e){return e.data.length>t?e.data.length:t},0)},makeGrid:function(){this.gridX=t.append("g").attr("class","grid gridX"),this.gridY=t.append("g").attr("class","grid gridY")},update:function(t,e){if(e.data){console.log("receive update",e),this.props=x(o,e),console.log("update",this.props.point);var r=X(this.props.axis);this.x=r[0],this.y=r[1];var n=e.data;a=Object(b.b)(e.axis.x.dateFormat),i=Object(b.a)(e.axis.x.dateFormat),n=n.map(function(t){return"TIME"===e.axis.x.scale&&(t.data=t.data.map(function(t){return Object.assign({},t,{x:"object"==typeof t.x?t.x:a(t.x.toString())})})),Object.assign({},c,t)}),this._drawScales(n),this._drawLines(n),this.drawAreas(n),S(this.x,this.y,this.gridX,this.gridY,this.props,this.valuesCount(n)),this._drawDataPointSet(n)}},destroy:function(e){t.selectAll("svg > *").remove()}}},q=(i.Component,a(548)),V=function(){var t,e={className:"map-d3",data:[],geojson:{features:[],type:"FeatureCollection"},height:200,width:200};return{create:function(e,a){void 0===a&&(a={}),this.mergeProps(a),this._makeSvg(e),this.container=t.append("g").attr("class","histogram-container"),this.update(e,a)},mergeProps:function(t){this.props=x(e,t),this.props.data=t.data},_makeSvg:function(e){if(t){t.selectAll("svg > *").remove(),t.remove();var a=e.getElementsByTagName("svg");a.length>0&&e.removeChild(a[0])}var i=this.props,r=i.width,n=i.height,s=i.className;t=Object(y.d)(e).append("svg").attr("class",s).attr("width",r).attr("height",n).attr("viewBox","0 0 "+r+" "+n).append("g")},updateChart:function(t,e){var a=this.props,i=a.width,r=a.height,n=Object(q.a)().scale(i/2/Math.PI*3).translate([i/2,r/2]),s=Object(q.b)().projection(n);this.container.selectAll("path").data(e.features).enter().append("path").attr("d",s)},update:function(t,e){if(e.data){this.mergeProps(e);var a=this.props,i=a.data,r=a.geojson;this.updateChart(i,r)}},destroy:function(e){t.selectAll("svg > *").remove()}}},J=function(t){function e(e){var a;return(a=t.call(this,e)||this).chart=V(),a.state={parentWidth:300},a}u()(e,t);var a=e.prototype;return a.handleResize=function(){var t=this,e=this.getDOMNode(),a=this.ref&&this.ref.offsetWidth?this.ref.offsetWidth:0;this.setState({parentWidth:a},function(){return t.chart.create(e,t.getChartState())})},a.componentDidMount=function(){var t=this;this.chart.create(this.getDOMNode(),this.getChartState()),"100%"===this.props.width&&(window.addEventListener("resize",function(e){return t.handleResize()}),this.handleResize())},a.componentDidUpdate=function(){this.chart.update(this.getDOMNode(),this.getChartState())},a.getChartState=function(){var t=this.props.width,e=this.props,a=(e.children,d()(e,["children"]));return"100%"===t&&(t=this.state.parentWidth||300),Object.assign({},a,{width:t})},a.componentWillUnmount=function(){"100%"===this.props.width&&window.removeEventListener("resize",this.handleResize),this.chart.destroy(this.getDOMNode())},a.getDOMNode=function(){return f.findDOMNode(this.ref)},a.render=function(){var t=this;return i.createElement("div",{ref:function(e){return t.ref=e},className:"map-chart-container"})},e}(i.Component);J.defaultProps={geojson:{features:[],type:"FeatureCollection"},height:200,width:"100%"};a(549);var K=a(295),Q=function(){var t,e,a,i={backgroundColor:"#ddd",className:"piechart-d3",colorScheme:w,data:{bins:[],counts:[]},donutWidth:0,height:200,labels:{display:!0,displayFn:function(t,e){return t.value}},margin:{left:10,top:10},tip:M,tipContainer:"body",tipContentFn:function(t,e,a,i){return i+": "+t[e]+"<br />"+a},visible:{},width:200};return{create:function(t,e){var a=this;void 0===e&&(e={}),this.props=x(i,Object.assign({},e)),this.previousData=e.data.counts.map(function(t,a){return t.data.map(function(a,i){return{count:a,groupLabel:t.label,label:e.data.bins[i]}})}),this._makeSvg(t),this.containers=[],this.previousData.forEach(function(t,e){a.drawChartBg(a.props.data,e)}),this.update(t,e)},_makeSvg:function(i){if(t){t.selectAll("svg > *").remove(),t.remove();var r=i.getElementsByTagName("svg");r.length>0&&i.removeChild(r[0])}var n=this.props,s=n.margin,o=n.width,c=n.height,l=n.className;t=Object(y.d)(i).append("svg").attr("class",l).attr("width",o).attr("height",c).attr("viewBox","0 0 "+o+" "+c).append("g").attr("transform","translate("+s.left+","+s.top+")");var d=D(this.props.tipContainer,e);a=d.tipContent,e=d.tipContainer},update:function(t,e){e.data&&(this.props=x(i,e),e.colorScheme&&(this.props.colorScheme=e.colorScheme),this.props.data.bins&&this.drawCharts())},outerRadius:function(t){void 0===t&&(t=0);var e=this.props,a=e.donutWidth,i=void 0===a?0:a,r=e.width,n=e.height,s=Math.min(r,n)/2;return 0===i?s-10:s-10-t*(i+10)},innerRadius:function(t){void 0===t&&(t=0);var e=this.props,a=e.donutWidth,i=void 0===a?0:a,r=e.width,n=e.height,s=Math.min(r,n)/2;return 0===i?0:s-10-i-t*(i+10)},drawCharts:function(){var t=this,e=this.props,a=e.data,i=e.visible;this.dataSets=a.counts.map(function(t){return t.data.map(function(e,r){return{count:!1!==i[a.bins[r]]?e:0,groupLabel:t.label,label:a.bins[r]}})}),this.dataSets.forEach(function(e,i){var r=k(a.counts[i],"colors",t.props.colorScheme);t.drawChart(e,i,a.bins,r)}),this.previousData=this.dataSets},drawChartBg:function(e,a){var i=this.props,r=i.backgroundColor,n=i.width,s=i.height,o=2*Math.PI,c=this.outerRadius(a),l=this.innerRadius(a),d=Object(Y.a)().innerRadius(l).outerRadius(c).startAngle(0).endAngle(o),h=t.append("g").attr("class","pie-bg").append("path").attr("class","pie-background").style("fill",r);h.enter().attr("transform","translate("+n/2+","+s/2+")").attr("d",d),h.merge(h),this.containers[a]||(this.containers[a]=t.append("g").attr("class","pie-container"))},drawChart:function(t,i,r,n){var s=this.props,o=s.labels,c=s.width,l=s.height,d=s.tip,h=s.tipContentFn,u=this.outerRadius(i),p=this.innerRadius(i),f=Object(Y.e)().sort(null).value(function(t){return t.count}),g=f(this.previousData[i]),m=Object(v.d)(n),y=Object(Y.a)().outerRadius(u).innerRadius(p),b=this.containers[i].selectAll("path").data(f(t));b.enter().append("g").attr("class","arc").append("path").attr("transform","translate("+c/2+","+l/2+")").attr("stroke","#FFF").attr("fill",function(t,e){return m(e)}).each(function(t,e){this._current=g[e]}).attr("d",y).on("mouseover",function(t,i){a.html(function(){return h(r,i,t.data.count,t.data.groupLabel)}),d.fx.in(e)}).on("mousemove",function(){return d.fx.move(e)}).on("mouseout",function(){return d.fx.out(e)}).style("opacity",0).transition().duration(500).style("opacity",1),b.merge(b).on("mouseover",function(t,i){a.html(function(){return h(r,i,t.data.count,t.data.groupLabel)}),d.fx.in(e)}).on("mousemove",function(){return d.fx.move(e)}).on("mouseout",function(){return d.fx.out(e)}).transition().delay(400).duration(500).attr("fill",function(t,e){return m(e)}).attrTween("d",function(t){return function(e){var a=Object(K.a)(this._current,e);return this._current=a(0),function(e){return t(a(e))}}}(y));var x=this.containers[i].selectAll("text.label").data(f(t));x.enter().append("text").attr("class","label").each(function(){this._height=l,this._width=c}).attr("transform",function(t){var e=y.centroid(t);return"translate("+(e[0]+this._width/2)+","+(e[1]+this._height/2)+")"}).each(function(t,e){this._current=t}).text(function(t,e){return 0===t.value?"":o.displayFn(t,e)});x.merge(x).transition().duration(500).style("opacity",0).transition().attr("transform",function(t){var e=y.centroid(t);return"translate("+(e[0]+this._width/2)+","+(e[1]+this._height/2)+")"}).transition().duration(500).style("opacity",function(t,e,a){return!1===o.display||0===t.data.count||0===a[e]._current.value?0:1}),x.exit().remove(),b.exit().transition().duration(500).style("opacity",0).remove()},destroy:function(e){t.selectAll("svg > *").remove()}}};var Z=function(t){function e(e){var a;return(a=t.call(this,e)||this).chart=Q(),a.state={parentWidth:300},a}u()(e,t);var a=e.prototype;return a.handleResize=function(){var t=this,e=(this.getDOMNode(),this.ref&&this.ref.offsetWidth?this.ref.offsetWidth:0);this.setState({parentWidth:e},function(){return t.chart.create(t.getDOMNode(),t.getChartState())})},a.componentDidMount=function(){var t=this;this.chart.create(this.getDOMNode(),this.getChartState()),"100%"===this.props.width&&(window.addEventListener("resize",function(e){return t.handleResize()}),this.handleResize())},a.componentDidUpdate=function(){this.chart.update(this.getDOMNode(),this.getChartState())},a.getChartState=function(){var t=this.props.width,e=this.props,a=(e.children,d()(e,["children"]));return"100%"===t&&(t=this.state.parentWidth||300),Object.assign({},a,{width:t})},a.componentWillUnmount=function(){"100%"===this.props.width&&window.removeEventListener("resize",this.handleResize),this.chart.destroy(this.getDOMNode())},a.getDOMNode=function(){return f.findDOMNode(this.ref)},a.render=function(){var t=this;return i.createElement("div",{ref:function(e){return t.ref=e},className:"piechart-chart-container"})},e}(i.Component);Z.defaultProps={backgroundColor:"#ddd",donutWidth:0,height:200,margin:{left:5,top:5}};a(138);var $=function(){var t,e,a,i,r=Object(v.b)(),n=Object(v.b)(),s={},o={choices:[],className:"scatter-plot-d3",colorScheme:w,data:[],delay:0,duration:400,height:300,legendWidth:100,padding:20,radius:4,width:"100%"};return{create:function(t,e){void 0===e&&(e=o),this.props=x(o,e),this.update(t,e)},_makeSvg:function(e,i){if(t){t.selectAll("svg > *").remove(),t.remove();var r=e.getElementsByTagName("svg");r.length>0&&e.removeChild(r[0])}var n=this.props,s=n.width,o=n.className,c=n.height,l=n.legendWidth,d=n.padding;t=Object(y.d)(e).append("svg").attr("class",o).attr("width",s+d+l).attr("height",c+d).append("g").attr("transform","translate("+d+","+d/2+")"),a=Object(v.d)(this.props.colorScheme)},_drawScales:function(a){var o=this.props,c=o.height,l=o.padding,d=o.width/a.length,h=c/a.length;n.range([l/2,d-l/2]),r.range([c-l/2,l/2]),t.selectAll(".x.axis").data(a).enter().append("g").attr("class","x axis").attr("transform",function(t,e){return"translate("+(a.length-e-1)*d+",0)"}).each(function(t){n.domain(s[t]),Object(y.d)(this).call(e)}),t.selectAll(".y.axis").data(a).enter().append("g").attr("class","y axis").attr("transform",function(t,e){return"translate(0,"+e*h+")"}).each(function(t){r.domain(s[t]),Object(y.d)(this).call(i)})},_drawLegend:function(){var e=this.props,i=e.choices,r=e.padding,n=e.width,s=e.split;if(void 0!==i){var o=t.append("g").attr("transform","translate("+(n+r/2)+", "+(r+50)+")");o.append("g").append("text").attr("x",0).attr("y",0).attr("dy",".71em").text(function(t){return s}),o.selectAll(".legendItem").data(i).enter().append("g").each(function(t,e){var i=Object(y.d)(this);i.append("rect").attr("class","legendItem").attr("x",0).attr("y",20+15*e).attr("fill",a(e)).attr("height",10).attr("width",10),i.append("text").attr("x",15).attr("y",20+15*e).attr("dy",".71em").text(function(e){return t})}),o.exit().remove()}},_drawPoints:function(e,i,o){var c=this.props,l=c.data,d=c.delay,h=c.duration,u=c.choices,p=c.split,f=c.padding,g=c.radius,m=e.length;t.selectAll(".cell").data(function(t,e){var a,i,r=[],n=t.length,s=e.length;for(a=-1;++a<n;)for(i=-1;++i<s;)r.push({x:t[a],i:a,y:e[i],j:i});return r}(e,e)).enter().append("g").attr("class","cell").attr("transform",function(t){return"translate("+(m-t.i-1)*i+","+t.j*i+")"}).each(function(t){var e=Object(y.d)(this);n.domain(s[Number(t.x)]),r.domain(s[Number(t.y)]),e.append("rect").attr("class","frame").attr("x",f/2).attr("y",f/2).attr("width",i-f).attr("height",o-f),e.selectAll("circle").data(l.values).enter().append("circle").attr("r",function(t){return g}).attr("cx",function(e){return n(e[Number(t.x)])}).attr("cy",function(e){return r(e[Number(t.y)])}).style("fill",function(t){if(t[p]){var e=u.findIndex(function(e){return e===t[p]});return a(e)}return"#eeaabb"}).transition().duration(h).delay(d).attr("r",function(t){return g})}).filter(function(t){return t.i===t.j}).append("text").attr("x",f).attr("y",f).attr("dy",".71em").text(function(t){return t.x})},update:function(t,a){if(this.props=Object.assign({},this.props,a),a.data){var o=this.props,c=o.data,l=o.distModels,d=o.height,h=o.width;this._makeSvg(t,a.data),this._drawLegend();var u=c.keys.filter(function(t){return-1!==l.indexOf(t)}),p=h/u.length,f=d/u.length,v=u.length;u.forEach(function(t){s[t]=Object(g.a)(c.values,function(e){return e[t]})}),e=Object(m.a)(n).ticks(6).tickSize(p*v),i=Object(m.b)(r).ticks(6).tickSize(-f*v),this._drawScales(u),this._drawPoints(u,p,f)}},destroy:function(e){t.selectAll("svg > *").remove()}}},tt=function(t){function e(e){var a;return(a=t.call(this,e)||this).chart=$(),a.state={choices:[],data:[],distModels:[],height:a.props.height,parentWidth:400,split:"",width:a.props.width},a}u()(e,t);var a=e.prototype;return a.handleResize=function(){var t=this,e=this.props,a=e.legendWidth,i=e.padding,r=Math.max(200,this.ref.offsetWidth-i-a),n=Math.max(200,window.innerHeight-i-this.ref.getBoundingClientRect().top),s=Math.min(n,r);this.setState({parentWidth:s},function(){return t.chart.create(t.getDOMNode(),t.getChartState())})},a.componentDidMount=function(){var t=this;this.chart.create(this.getDOMNode(),this.getChartState());var e=this.props.width;"string"==typeof e&&"100%"===e&&(window.addEventListener("resize",function(e){return t.handleResize()}),this.handleResize())},a.componentDidUpdate=function(){this.chart.update(this.getDOMNode(),this.getChartState())},a.getChartState=function(){var t=this.props.width,e=this.props,a=e.data,i=e.choices,r=e.split,n=e.distModels,s=e.height;return"string"==typeof t&&"100%"===t&&(t=this.state.parentWidth||300),{choices:i,data:a,distModels:n,height:s,parentWidth:this.state.parentWidth,split:r,width:t}},a.componentWillReceiveProps=function(t){this.chart.update(this.getDOMNode(),this.getChartState())},a.componentWillUnmount=function(){var t=this.props.width;"string"==typeof t&&"100%"===t&&window.removeEventListener("resize",this.handleResize),this.chart.destroy(this.getDOMNode())},a.getDOMNode=function(){return f.findDOMNode(this.ref)},a.render=function(){var t=this;return i.createElement("div",{ref:function(e){return t.ref=e},className:"scatterplot-chart-container"})},e}(i.Component);tt.defaultProps={height:400,width:"100%"};var et=a(296),at=a(291),it=function(t){return r.a.createElement(o.k,{component:"div",style:{padding:24}},t.children)},rt={x:{style:{stroke:"#eeAA00","stroke-opacity":.4},ticks:5},y:{height:20,style:{"stroke-opacity":.4},ticks:5}},nt={bins:["Data 1","Data 6","Data 3","Dat 4"],counts:[{data:[1,2,3,4],label:"DataSet 1"},{data:[13,14,15,16],label:"DataSet 2"}],grid:rt},st={x:{height:20,label:"X Axis",margin:20,text:{style:{dy:".35em","text-anchor":"start",transform:"rotate(90)",x:0,y:0}},tickSize:0},y:{label:"Y Axis!",style:{fill:"none",stroke:"#eeAA00"},text:{style:{fill:"#eeAA00"}},tickSize:20,ticks:3,width:50}},ot=["rgba(255, 113, 1, 0.5)","#fff6ef","rgba(0, 169, 123, 0.5)","#f6fffd","#D7263D","rgba(215, 38, 61, 0.05)","#0f2629","#ededed","rgba(86, 180, 191, 0.5)","#f5fbfb","#000000","#0f2629","#D7263D","#FBD7D9","#ffebec","#963540","#22545a","#56b4bf","#56b4bf","#56b4bf","#FF7101","#449098","#77c3cb","#d4eef8","#ff7101","#FF7101","#cc5a00","#ff8d33","#fef9e5","#7d5d2e","#00a97b","#008762","#33ba95","#dbf1d6","#227839","#0f5e7b","#d4eef8","#0f5e7b","#F9C80E","#007656","#c5e5e9","#f9c80e","#a9a9a9","#dbdbdb","#cccccc","#e6e6e6","#56b4bf","#449098","#77c3cb","#22545a","#ff7101","#cdcdcd","#ffffff","#d7263d","#00a97b","#888888","#e6e6e6","#f2f2f2","#f4f4f4"].filter(function(t){try{var e=c(t),a=e.hsl().array();if(a.length>3)return!1;var i=e.luminosity();return i<.8&&i>.1&&a[2]<200&&a[2]>20}catch(r){return!1}}).filter(function(t,e,a){return a.indexOf(t)===e}).sort(function(){return Math.random()-.5});a.d(e,"dataToSpreadSheet",function(){return ut});var ct=[function(t,e,a){return t[e]+"<br />HI THere "+a.toFixed(2)},function(t,e,a){return t[e]+"<br />Bookay "+a.toFixed(2)}],lt={bins:nt.counts.map(function(t){return t.label}),counts:[{data:nt.counts.map(function(t){return t.data.reduce(function(t,e){return t+e},0)}),label:""}]},dt={chartType:"Histogram",data:nt};function ht(t,e){switch(e.type){case"setChartType":return Object.assign({},t,{chartType:e.chartType});case"setData":return Object.assign({},t,{data:e.data});default:throw new Error}}var ut=function(t){var e=[];return t.bins.forEach(function(t,a){e[a]||(e[a]=[]),e[a][0]={value:t}}),t.counts.forEach(function(t,a){t.data.forEach(function(t,i){e[i]||(e[i]=[]),e[i][a+1]={value:t}})}),e};e.default=function(){var t=Object(i.useState)(0),e=t[0],a=t[1],n=Object(i.useReducer)(ht,dt),c=n[0],l=n[1],d=Object(i.useState)({}),h=d[0],u=d[1],p=ut(c.data),f="Histogram"===c.chartType?F:_;return r.a.createElement(et.a,null,r.a.createElement(at.a,{title:"Histogram",description:""}),r.a.createElement(o.k,{variant:"h2"},"Histogram"),r.a.createElement("div",null,r.a.createElement(o.e,{container:!0,spacing:24},r.a.createElement(o.e,{item:!0,xs:6},r.a.createElement(o.c,null,r.a.createElement(o.d,null,r.a.createElement(f,{data:c.data,axis:st,grid:rt,width:"100%",height:300,visible:h,colorScheme:ot,tipContentFn:ct[0]}),r.a.createElement(B,{theme:ot,data:lt,onSelect:function(t){var e;u(Object.assign({},h,((e={})[t]=!!h.hasOwnProperty(t)&&!h[t],e)))},visible:h}))),r.a.createElement("br",null),r.a.createElement(o.c,null,r.a.createElement(o.d,null,r.a.createElement("pre",null,JSON.stringify(c))))),r.a.createElement(o.e,{item:!0,xs:6},r.a.createElement(o.c,null,r.a.createElement(o.d,null,r.a.createElement(o.h,{value:e,onChange:function(t,e){return a(e)}},r.a.createElement(o.g,{label:"Data"}),r.a.createElement(o.g,{label:"Styling"})),0===e&&r.a.createElement(it,null,r.a.createElement(s.a,{data:p,valueRenderer:function(t){return t.value},sheetRenderer:function(t){return r.a.createElement("table",{className:t.className+" my-awesome-extra-class"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"action-cell"},"Bin"),c.data.counts.map(function(t){return r.a.createElement("th",{key:t.label,className:"action-cell"},t.label)}))),r.a.createElement("tbody",null,t.children))},onCellsChanged:function(t){t.forEach(function(t){t.cell;var e=t.row,a=t.col,i=t.value;0===a?c.data.bins[e]=i:c.data.counts[a-1].data[e]=Number(i)}),l({type:"setData",data:c.data})}})),1===e&&r.a.createElement(it,null,r.a.createElement(o.e,{container:!0,spacing:24},r.a.createElement(o.e,{item:!0,xs:6},r.a.createElement(o.i,{select:!0,label:"Chart direction",value:c.chartType,onChange:function(t){l({type:"setChartType",chartType:t.target.value})}},r.a.createElement(o.f,{value:"Histogram"},"Histogram"),r.a.createElement(o.f,{value:"HorizontalHistogram"},"HorizontalHistogram")))))))))))}},274:function(t,e,a){"use strict";a.d(e,"b",function(){return d});var i=a(0),r=a.n(i),n=a(1),s=a.n(n),o=a(53),c=a.n(o);a.d(e,"a",function(){return c.a});a(275);var l=r.a.createContext({}),d=function(t){return r.a.createElement(l.Consumer,null,function(e){return t.data||e[t.query]&&e[t.query].data?(t.render||t.children)(t.data?t.data.data:e[t.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};d.propTypes={data:s.a.object,query:s.a.string.isRequired,render:s.a.func,children:s.a.func}},275:function(t,e,a){var i;t.exports=(i=a(285))&&i.default||i},284:function(t){t.exports={data:{site:{siteMetadata:{title:"Infosum Charts"}}}}},285:function(t,e,a){"use strict";a.r(e);a(55);var i=a(0),r=a.n(i),n=a(1),s=a.n(n),o=a(86),c=a(4),l=function(t){var e=t.location,a=c.default.getResourcesForPathnameSync(e.pathname);return r.a.createElement(o.a,Object.assign({location:e,pageResources:a},a.json))};l.propTypes={location:s.a.shape({pathname:s.a.string.isRequired}).isRequired},e.default=l},291:function(t,e,a){"use strict";var i=a(292),r=a(1),n=a.n(r),s=a(0),o=a.n(s),c=a(326),l=a.n(c);function d(t){var e=t.description,a=t.lang,r=t.meta,n=t.keywords,s=t.title,c=i.data.site,d=e||c.siteMetadata.description;return o.a.createElement(l.a,{htmlAttributes:{lang:a},title:s,titleTemplate:"%s | "+c.siteMetadata.title,meta:[{content:d,name:"description"},{content:s,property:"og:title"},{content:d,property:"og:description"},{content:"website",property:"og:type"},{content:"summary",name:"twitter:card"},{content:c.siteMetadata.author,name:"twitter:creator"},{content:s,name:"twitter:title"},{content:d,name:"twitter:description"}].concat(n.length>0?{content:n.join(", "),name:"keywords"}:[]).concat(r)})}d.defaultProps={keywords:[],lang:"en",meta:[]},d.propTypes={description:n.a.string,keywords:n.a.arrayOf(n.a.string),lang:n.a.string,meta:n.a.array,title:n.a.string.isRequired},e.a=d},292:function(t){t.exports={data:{site:{siteMetadata:{title:"Infosum Charts",description:"Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.",author:"@gatsbyjs"}}}}},296:function(t,e,a){"use strict";var i=a(284),r=(a(303),a(274)),n=a(1),s=a.n(n),o=a(0),c=a.n(o),l=a(286),d=function(t){var e=t.siteTitle;return c.a.createElement(l.a,{position:"static"},c.a.createElement(l.j,null,c.a.createElement(l.k,{variant:"h6",color:"inherit"},c.a.createElement(r.a,{to:"/"},e)),c.a.createElement(l.b,null,c.a.createElement(r.a,{to:"/histogram"},"Histogram")),c.a.createElement(l.b,null,c.a.createElement(r.a,{to:"/line"},"Line Chart")),c.a.createElement(l.b,null,c.a.createElement(r.a,{to:"/pie"},"Pie Chart")),c.a.createElement(l.b,null,c.a.createElement(r.a,{to:"/joyplot"},"Joy Plot"))))};d.propTypes={siteTitle:s.a.string},d.defaultProps={siteTitle:""};var h=d,u=function(t){var e=t.children;return c.a.createElement(r.b,{query:"755544856",render:function(t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(h,{siteTitle:t.site.siteMetadata.title}),c.a.createElement("div",{style:{flexGrow:2,margin:"0 auto",padding:"0px 1.0875rem 1.45rem",paddingTop:0,width:"100%"}},c.a.createElement("main",null,e)),c.a.createElement("footer",null,"© ",(new Date).getFullYear(),", Built by"," ",c.a.createElement("a",{href:"https://www.infosum.com"},"InfoSum")))},data:i})};u.propTypes={children:s.a.node.isRequired};e.a=u}}]);
//# sourceMappingURL=component---src-pages-histogram-tsx-2e3009f45b47cc0d16ea.js.map